define(["exports","./vendor-22992e2c","./visibility-c7f197c2","./_rollupPluginBabelHelpers-d0b0ebba"],(function(e,t,a,i){"use strict";const n={name:"NoContentMessage",props:{icon:{type:String,required:!0},iconFillType:{type:String,default:"fill"}}};var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"no-content-message oc-flex oc-flex-column oc-flex-center oc-flex-middle oc-text-center"},[a("oc-icon",{attrs:{name:e.icon,type:"div",size:"xxlarge","fill-type":e.iconFillType}}),e._v(" "),a("div",{staticClass:"oc-text-muted oc-text-xlarge"},[e._t("message")],2),e._v(" "),a("div",{staticClass:"oc-text-muted"},[e._t("callToAction")],2)],1)};l._withStripped=!0;const s=t.normalizeComponent({render:l,staticRenderFns:[]},undefined,n,undefined,false,undefined,!1,void 0,void 0,void 0);let o,r;const c=t.defineComponent({props:{open:{type:Boolean,required:!0},loading:{type:Boolean,required:!0},availablePanels:{type:Array,required:!0},activePanel:{type:String,required:!1,default:""},warningMessage:{type:String,required:!1,default:""},isContentDisplayed:{type:Boolean,required:!1,default:!0},isHeaderCompact:{type:Boolean,required:!1,default:!1}},data:()=>({focused:void 0,oldPanelName:null,selectedFile:{}}),computed:{activeAvailablePanelName(){const e=this.activePanel?.split("#")[0];return e&&this.availablePanels.map((e=>e.app)).includes(e)?e:null},activePanelName(){return this.activeAvailablePanelName||this.defaultPanel.app},defaultPanel(){return this.availablePanels.find((e=>e.default))},accessibleLabelBack(){const e=this.$gettext("Back to %{panel} panel");return this.$gettextInterpolate(e,{panel:this.defaultPanel.title})}},watch:{activePanelName:{handler:function(e,t){this.$nextTick((()=>{this.focused=e?`#sidebar-panel-${e}`:`#sidebar-panel-select-${t}`}))},immediate:!0},open:{handler:function(e){e&&this.$nextTick((()=>{this.initVisibilityObserver()}))},immediate:!0}},beforeDestroy(){o.disconnect(),r.disconnect()},methods:{scrollToElement({element:e,panelName:t}){const a=document.getElementsByClassName(`sidebar-panel__body-${t}`)[0],i=Number(window.getComputedStyle(a).getPropertyValue("padding")?.split("px")[0]);a.scrollTo(0,e.getBoundingClientRect().y-a.getBoundingClientRect().y-i)},setSidebarPanel(e){this.$emit("selectPanel",e)},resetSidebarPanel(){this.$emit("selectPanel",null)},closeSidebar(){this.$emit("close")},initVisibilityObserver(){o=new a.VisibilityObserver({root:document.querySelector("#app-sidebar"),threshold:.9}),r=new a.VisibilityObserver({root:document.querySelector("#app-sidebar"),threshold:.05});const e=()=>{const e=document.querySelector(this.focused);e&&e.focus()},t=()=>{this.oldPanelName=null};this.$refs.panels&&(o.disconnect(),r.disconnect(),this.$refs.panels.forEach((a=>{o.observe(a,{onEnter:e,onExit:e}),r.observe(a,{onExit:t})})))},setOldPanelName(){this.oldPanelName=this.activePanelName},openPanel(e){this.setOldPanelName(),this.setSidebarPanel(e)},closePanel(){this.setOldPanelName(),this.resetSidebarPanel()}}});var d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{"has-active-sub-panel":!!e.activeAvailablePanelName,"oc-flex oc-flex-center oc-flex-middle":e.loading},attrs:{id:"app-sidebar","data-testid":"app-sidebar"}},[e.loading?a("oc-spinner"):e._l(e.availablePanels,(function(t){return a("div",{key:"panel-"+t.app,ref:"panels",refInFor:!0,staticClass:"sidebar-panel",class:{"is-active-sub-panel":e.activeAvailablePanelName===t.app,"is-active-default-panel":t.default&&e.activePanelName===t.app,"sidebar-panel-default":t.default,"compact-header":e.isHeaderCompact},attrs:{id:"sidebar-panel-"+t.app,"data-testid":"sidebar-panel-"+t.app,tabindex:e.activePanelName===t.app?-1:null}},[!1!==t.enabled?[[e.activePanelName,e.oldPanelName].includes(t.app)?a("div",{staticClass:"sidebar-panel__header header"},[t.default?e._e():a("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.accessibleLabelBack,expression:"accessibleLabelBack"}],staticClass:"header__back",attrs:{appearance:"raw","aria-label":e.accessibleLabelBack},on:{click:e.closePanel}},[a("oc-icon",{attrs:{name:"arrow-left-s","fill-type":"line"}})],1),e._v(" "),a("h2",{staticClass:"header__title oc-my-rm"},[e._v("\n            "+e._s(e.$gettext(t.title))+"\n          ")]),e._v(" "),a("oc-button",{staticClass:"header__close",attrs:{appearance:"raw","aria-label":e.$gettext("Close file sidebar")},on:{click:e.closeSidebar}},[a("oc-icon",{attrs:{name:"close"}})],1)],1):e._e(),e._v(" "),e._t("header"),e._v(" "),a("div",{staticClass:"sidebar-panel__body",class:["sidebar-panel__body-"+t.app]},[e.isContentDisplayed?[a("div",{staticClass:"sidebar-panel__body-content"},[e._t("body",(function(){return[a(t.component,e._g(e._b({tag:"component",on:{scrollToElement:e.scrollToElement}},"component",t.componentAttrs,!1),t.componentListeners))]}))],2),e._v(" "),t.default&&e.availablePanels.length>1?a("div",{staticClass:"sidebar-panel__navigation oc-mt-m"},e._l(e.availablePanels.filter((function(e){return!e.default&&!1!==e.enabled})),(function(t){return a("oc-button",{key:"panel-select-"+t.app,attrs:{id:"sidebar-panel-"+t.app+"-select","data-testid":"sidebar-panel-"+t.app+"-select",appearance:"raw"},on:{click:function(a){return e.openPanel(t.app)}}},[a("oc-icon",{attrs:{name:t.icon,"fill-type":t.iconFillType}}),e._v("\n                "+e._s(e.$gettext(t.title))+"\n                "),a("oc-icon",{attrs:{name:"arrow-right-s","fill-type":"line"}})],1)})),1):e._e()]:a("p",[e._v(e._s(e.warningMessage))])],2)]:e._e()],2)}))],2)};d._withStripped=!0;const p=t.normalizeComponent({render:d,staticRenderFns:[]},undefined,c,undefined,false,undefined,!1,void 0,void 0,void 0);const u={name:"QuotaSelect",props:{title:{type:String,required:!0},totalQuota:{type:Number,default:0},maxQuota:{type:Number,default:0}},data:function(){return{selectedOption:void 0,options:[]}},computed:{DEFAULT_OPTIONS:function(){return[{displayValue:"1",displayUnit:"GB",value:Math.pow(10,9)},{displayValue:"5",displayUnit:"GB",value:5*Math.pow(10,9)},{displayValue:"10",displayUnit:"GB",value:10*Math.pow(10,9)},{displayValue:"50",displayUnit:"GB",value:50*Math.pow(10,9)},{displayValue:"100",displayUnit:"GB",value:100*Math.pow(10,9)},{displayValue:"500",displayUnit:"GB",value:500*Math.pow(10,9)},{displayValue:"1000",displayUnit:"GB",value:1e3*Math.pow(10,9)},{displayValue:this.$gettext("No restriction"),displayUnit:"",value:0}]}},watch:{totalQuota:function(){var e=this,t=this.options.find((function(t){return t.value===e.totalQuota}));t&&(this.selectedOption=t)}},mounted:function(){var e=this;this.setOptions(),this.selectedOption=this.options.find((function(t){return t.value===e.totalQuota}))},methods:{optionSelectable:function(e){return!1!==e.selectable},createOption:function(e){if("0"===(e=e.replace(",","."))||!/^[0-9]\d*(([.,])\d+)?$/g.test(e))return{displayValue:e,error:this.$gettext("Please enter only numbers"),selectable:!1};var t=parseFloat(e).toFixed(2)*Math.pow(10,9),a=parseFloat(e).toFixed(2).toString().replace(".00","");return this.maxQuota&&t>this.maxQuota?{value:t,displayValue:a,displayUnit:"GB",error:this.$gettextInterpolate(this.$gettext("Max quota limit of %{ limit } GB exceeded"),{limit:this.maxQuota*Math.pow(10,-9)}),selectable:!1}:{value:t,displayValue:a,displayUnit:"GB"}},setOptions:function(){var e=this,t=i._toConsumableArray(this.DEFAULT_OPTIONS);if(!t.find((function(t){return t.value===e.totalQuota}))){var a={displayValue:(this.totalQuota*Math.pow(10,-9)).toFixed(2).toString().replace(".00",""),displayUnit:"GB",value:this.totalQuota};t.push(a)}this.maxQuota&&t.forEach((function(t){(t.value>e.maxQuota||0===t.value)&&(t.selectable=!1)})),t=[].concat(i._toConsumableArray(t.filter((function(e){return e.value})).sort((function(e,t){return e.value-t.value}))),i._toConsumableArray(t.filter((function(e){return!e.value})))),this.options=t}}};var v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("oc-select",{ref:"select",attrs:{selectable:e.optionSelectable,taggable:"","push-tags":"",clearable:!1,options:e.options,"create-option":e.createOption,"option-label":"displayValue",label:e.title},on:{"option:selected":function(t){return e.$emit("selectedOptionChange",e.selectedOption)}},scopedSlots:e._u([{key:"selected-option",fn:function(t){var i=t.displayValue,n=t.displayUnit;return[a("span",[e._v(e._s(i))]),e._v(" "),n?a("span",{staticClass:"oc-ml-s"},[e._v(e._s(n))]):e._e()]}},{key:"search",fn:function(t){var i=t.attributes,n=t.events;return[a("input",e._g(e._b({staticClass:"vs__search"},"input",i,!1),n))]}},{key:"option",fn:function(t){var i=t.displayValue,n=t.displayUnit,l=t.error;return[a("div",{staticClass:"oc-flex oc-flex-between"},[a("div",[e._v(e._s(i))]),e._v(" "),n?a("div",[e._v(e._s(n))]):e._e()]),e._v(" "),l?a("div",{staticClass:"oc-text-input-danger"},[e._v(e._s(l))]):e._e()]}}]),model:{value:e.selectedOption,callback:function(t){e.selectedOption=t},expression:"selectedOption"}}),e._v(" "),a("p",{staticClass:"oc-mt-xs oc-text-meta",domProps:{textContent:e._s(e.$gettext("Select a quota option or enter your own value"))}})],1)};v._withStripped=!0;const f=t.normalizeComponent({render:v,staticRenderFns:[]},undefined,u,undefined,false,undefined,!1,void 0,void 0,void 0);e.__vue_component__=p,e.__vue_component__$1=s,e.__vue_component__$2=f}));
