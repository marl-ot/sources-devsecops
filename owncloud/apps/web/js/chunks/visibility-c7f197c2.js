define(["exports","./vendor-22992e2c","./base-fbc1ccef"],(function(t,e,i){"use strict";class s{runtimeConfiguration;optionsConfiguration;oAuth2Configuration;oidcConfiguration;constructor(){this.runtimeConfiguration={serverUrl:""},this.optionsConfiguration={}}initialize(t){this.serverUrl=t.server,this.options=t.options,this.oAuth2Configuration=t.auth?t.auth:null,this.oidcConfiguration=t.openIdConnect?t.openIdConnect:null}set serverUrl(t){this.runtimeConfiguration.serverUrl=i.urlJoin(t||window.location.origin,{trailingSlash:!0})}get serverUrl(){return this.runtimeConfiguration.serverUrl}get isOAuth2(){return!e.isNil(this.oAuth2Configuration)}get oAuth2(){return this.oAuth2Configuration}get isOIDC(){return!e.isNil(this.oidcConfiguration)}get oidc(){return this.oidcConfiguration}set options(t){e.set(this.optionsConfiguration,"routing.idBased",e.get(t,"routing.idBased",!0))}get options(){return this.optionsConfiguration}}const n=new s;class r{value;expires;constructor(t,e){this.value=t,this.expires=e?(new Date).getTime()+e:0}get expired(){return this.expires>0&&this.expires<(new Date).getTime()}}class o{map;ttl;capacity;constructor(t){this.ttl=t.ttl||0,this.capacity=t.capacity||0,this.map=new Map}set(t,e,i){return this.evict(),this.map.set(t,new r(e,isNaN(i)?this.ttl:i)),e}get(t){this.evict();const e=this.map.get(t);if(e)return e.value}delete(t){return this.map.delete(t)}clear(){return this.map.clear()}entries(){return this.evict(),[...this.map.entries()].map((t=>[t[0],t[1].value]))}keys(){return this.evict(),[...this.map.keys()]}has(t){return this.evict(),this.map.has(t)}values(){return this.evict(),[...this.map.values()].map((t=>t.value))}evict(){if(this.map.forEach(((t,e)=>{t.expired&&this.delete(e)})),this.capacity)for(const[t]of[...this.map.entries()]){if(this.map.size<=this.capacity)break;this.delete(t)}}}const a=new o({ttl:1e4,capacity:250}),h=new o({ttl:1e4,capacity:250});const c=new class{get avatarUrl(){return h}get filePreview(){return a}};class u{topics;constructor(){this.topics=new Map}subscribe(t,i){const s={token:e.v4(),callback:i},n=[s,...this.topics.get(t)||[]];return this.topics.set(t,n),s.token}publish(t,e){(this.topics.get(t)||[]).forEach((t=>t.callback(e)))}unsubscribe(t,e){this.topics.has(t)&&this.topics.set(t,this.topics.get(t).filter((t=>t.token!==e)))}}const l=new u;var g;!function(t){t[t.enter=0]="enter",t[t.exit=1]="exit"}(g||(g={}));class p{state;observeEnter;observeExit;onEnterCallCount;onExitCallCount;onEnter;onExit;threshold;unobserver;constructor(t,e,i){this.unobserver=t,this.threshold=e,this.onEnter=i.onEnter,this.onExit=i.onExit,this.observeEnter=!!i.onEnter,this.observeExit=!!i.onExit,this.onEnterCallCount=0,this.onExitCallCount=0}request(t,e){const i={element:e,unobserve:()=>this.unobserve(t,e)};t===g.enter&&this.observeEnter&&this.onEnter?(this.onEnterCallCount++,this.onEnter({callCount:this.onEnterCallCount,...i})):this.state===g.enter&&t===g.exit&&this.observeExit&&this.onExit&&(this.onExitCallCount++,this.onExit({callCount:this.onExitCallCount,...i})),this.state=t}unobserve(t,e){t===g.enter?this.observeEnter=!1:t===g.exit&&(this.observeExit=!1),this.observeEnter||this.observeExit||this.unobserver(e)}}t.Cache=o,t.ConfigurationManager=s,t.EventBus=u,t.VisibilityObserver=class{targets;intersectionObserver;options;constructor(t={}){this.options={root:t.root,rootMargin:t.rootMargin,threshold:t.threshold||0},this.targets=new WeakMap,this.intersectionObserver=new IntersectionObserver(this.trigger.bind(this),this.options)}observe(t,e={},i){(e.onEnter||e.onExit)&&(this.targets.set(t,new p(this.unobserve.bind(this),i||this.options.threshold||0,{onEnter:e.onEnter,onExit:e.onExit})),this.intersectionObserver.observe(t))}unobserve(t){this.targets.delete(t),this.intersectionObserver.unobserve(t)}disconnect(){this.targets=new WeakMap,this.intersectionObserver.disconnect()}trigger(t){t.forEach((t=>{const e=this.targets.get(t.target);e&&e.request(t.isIntersecting&&t.intersectionRatio>e.threshold?g.enter:g.exit,t.target)}))}},t.cacheService=c,t.configurationManager=n,t.eventBus=l,t.useStore=()=>e.getCurrentInstance().proxy.$store}));
