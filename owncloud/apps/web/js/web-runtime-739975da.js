define(["exports","./chunks/vendor-22992e2c","./chunks/AppLoadingSpinner-348c6387","./chunks/_rollupPluginBabelHelpers-d0b0ebba","./chunks/visibility-c7f197c2","./chunks/client-aa4fd000","./chunks/base-fbc1ccef","./chunks/error-cc50dafd","./chunks/useSpacesLoading-b404aeae","./chunks/useLocalStorage-9756f032","./chunks/permissionManager-dac47567","./chunks/useUserContext-a419a918","./chunks/useTranslations-561064a5","./chunks/functions-f74c7f04","./web-client-c170d434","./chunks/useGraphClient-6c0c047b"],(function(e,t,n,i,a,o,r,s,l,c,u,d,p,m,h,f){"use strict";function g(e,t){let n,i;switch(e.role){case r.spaceRoleManager.name:n=r.spaceRoleManager.bitmask(!0),i=r.spaceRoleManager;break;case r.spaceRoleEditor.name:n=r.spaceRoleEditor.bitmask(!0),i=r.spaceRoleEditor;break;case r.spaceRoleViewer.name:n=r.spaceRoleViewer.bitmask(!0),i=r.spaceRoleViewer}return{shareType:r.ShareTypes.space.value,id:t,collaborator:{name:e.onPremisesSamAccountName,displayName:e.displayName,additionalInfo:null},permissions:n,role:i}}const v={props:{target:{type:String,required:!0}},computed:{targetElement:function(){return document.getElementById(this.target)}},methods:{skipToTarget:function(){this.targetElement.setAttribute("tabindex","-1"),this.targetElement.focus(),this.targetElement.scrollIntoView()}}};var b=function(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{staticClass:"skip-button",on:{click:e.skipToTarget}},[e._t("default")],2)};b._withStripped=!0;const w=t.normalizeComponent({render:b,staticRenderFns:[]},undefined,v,"data-v-506cd62a",false,undefined,!1,void 0,void 0,void 0);var y={computed:i._objectSpread2({},t.mapGetters(["getNavItemsByExtension"])),methods:{navigation_getMenuItems:function(e,t){var n=this;return this.applicationsList.filter((function(t){return"extension"===t.type?n.getNavItemsByExtension(t.id).filter((function(t){return S(e,t)})).length>0:S(e,t)})).map((function(e){var i,a,o=n.$language.current,r=e.title?e.title.en:e.name;e.title&&e.title[o]&&(r=e.title[o]),e.icon?e.icon.indexOf(".")<0?i=e.icon:a=e.icon:i="deprecated";var s={icon:i,iconUrl:a,title:r};return e.url?(s.url=e.url,s.target=["_blank","_self","_parent","_top"].includes(e.target)?e.target:"_blank"):e.path?(s.path=e.path,s.active=null==t?void 0:t.startsWith(s.path)):(s.path="/".concat(e.id),s.active=null==t?void 0:t.startsWith(s.path)),s}))}}};function S(e,t){return t.menu?e.includes(t.menu):e.includes(null)}const C={props:{applicationsList:{type:Array,required:!1,default:function(){return[]}}},computed:i._objectSpread2(i._objectSpread2({},t.mapGetters("runtime/auth",["accessToken"])),{},{applicationSwitcherLabel:function(){return this.$gettext("Application Switcher")}}),mounted:function(){var e,t,n=this;null===(e=this.$refs.menu)||void 0===e||null===(t=e.tippy)||void 0===t||t.setProps({onHidden:function(){return n.$refs.menubutton.$el.focus()},onShown:function(){return n.$refs.menu.$el.querySelector("a:first-of-type").focus()}})},methods:{clickApp:function(e){var t=this;return i._asyncToGenerator(i._regeneratorRuntime().mark((function n(){var a;return i._regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===(a=e.url)||void 0===a||!a.endsWith("/apps/files")){n.next=3;break}return n.next=3,t.setClassicUIDefault();case 3:case"end":return n.stop()}}),n)})))()},setClassicUIDefault:function(){var e=r.urlJoin(a.configurationManager.serverUrl,"/index.php/apps/web/settings/default");return o.clientService.httpAuthenticated(this.accessToken).post(e,{isDefault:!1})}}};var k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"oc-flex oc-flex-middle",attrs:{id:"applications-menu","aria-label":e.$gettext("Main navigation")}},[n("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.applicationSwitcherLabel,expression:"applicationSwitcherLabel"}],ref:"menubutton",staticClass:"oc-topbar-menu-burger",attrs:{id:"_appSwitcherButton",appearance:"raw",variation:"inverse","aria-label":e.applicationSwitcherLabel}},[n("oc-icon",{staticClass:"oc-flex",attrs:{name:"grid",size:"large"}})],1),e._v(" "),n("oc-drop",{ref:"menu",attrs:{"drop-id":"app-switcher-dropdown",toggle:"#_appSwitcherButton",mode:"click","padding-size":"small","close-on-click":""}},[n("oc-list",{staticClass:"applications-list"},e._l(e.applicationsList,(function(t,i){return n("li",{key:"apps-menu-"+i,on:{click:function(n){return e.clickApp(t)}}},[n("oc-button",{key:t.url?"apps-menu-external-link":"apps-menu-internal-link",class:{"oc-background-primary-gradient":t.active},attrs:{type:t.url?"a":"router-link",target:t.target,href:t.url,to:t.path,appearance:"raw",variation:t.active?"inverse":"passive"}},[n("span",{staticClass:"icon-box"},[n("oc-icon",{attrs:{name:t.icon}})],1),e._v(" "),n("span",{domProps:{textContent:e._s(e.$gettext(t.title))}}),e._v(" "),t.active?n("oc-icon",{staticClass:"active-check",attrs:{name:"check"}}):e._e()],1)],1)})),0)],1)],1)};k._withStripped=!0;const _=t.normalizeComponent({render:k,staticRenderFns:[]},undefined,C,"data-v-37b4504a",false,undefined,!1,void 0,void 0,void 0);const E={props:{applicationsList:{type:Array,required:!1,default:function(){return[]}}},setup:function(){return{hasSpaces:l.useCapabilitySpacesEnabled()}},computed:i._objectSpread2(i._objectSpread2(i._objectSpread2(i._objectSpread2({},t.mapGetters(["quota","user"])),t.mapGetters({legacyQuota:"quota"})),t.mapState("runtime/spaces",["spaces"])),{},{quota:function(){var e;return this.hasSpaces?null===(e=this.spaces.find((function(e){return"personal"===e.driveType})))||void 0===e?void 0:e.spaceQuota:this.legacyQuota},useLegacyQuota:function(){return!this.hasSpaces},userId:function(){return this.user.username||this.user.id},personalStorageLabel:function(){return this.limitedPersonalStorage?this.$gettextInterpolate(this.$gettext("Personal storage (%{percentage}% used)"),{percentage:this.quotaUsagePercent||0}):this.$gettext("Personal storage")},personalStorageDetailsLabel:function(){var e="none"===this.quota.definition?0:this.quota.total||0,n=this.quota.used||0;return this.$gettextInterpolate(e?this.$gettext("%{used} of %{total} used"):this.$gettext("%{used} used"),{used:t.filesize_min(n),total:t.filesize_min(e)})},limitedPersonalStorage:function(){return this.useLegacyQuota?!t.isNil(this.quota.relative)&&"none"!==this.quota.definition:0!==this.quota.total},quotaEnabled:function(){return!!this.quota},quotaUsagePercent:function(){return this.useLegacyQuota?this.quota.relative:parseFloat((this.quota.used/this.quota.total*100).toFixed(2))},quotaProgressVariant:function(){return(this.quotaUsagePercent||0)<80?"primary":(this.quotaUsagePercent||0)<90?"warning":"danger"}}),mounted:function(){var e,t,n=this;null===(e=this.$refs.menu)||void 0===e||null===(t=e.tippy)||void 0===t||t.setProps({onHidden:function(){return n.$refs.menuButton.$el.focus()},onShown:function(){return n.$refs.menu.$el.querySelector("a:first-of-type").focus()}})},methods:{logout:function(){s.authService.logoutUser()}}};var I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.userId?n("nav",{attrs:{"aria-label":e.$gettext("Account menu")}},[n("oc-button",{ref:"menuButton",staticClass:"oc-topbar-personal",attrs:{id:"_userMenuButton",appearance:"raw","aria-label":e.$gettext("User Menu")}},[n("avatar-image",{staticClass:"oc-topbar-personal-avatar oc-flex-inline oc-flex-center oc-flex-middle",attrs:{width:32,userid:e.userId,"user-name":e.user.displayname}})],1),e._v(" "),n("oc-drop",{ref:"menu",attrs:{"drop-id":"account-info-container",toggle:"#_userMenuButton",mode:"click","close-on-click":"","padding-size":"small"}},[n("oc-list",{staticClass:"user-menu-list"},[n("li",[n("oc-button",{attrs:{id:"oc-topbar-account-manage",type:"router-link",to:{path:"/account"},appearance:"raw"}},[n("avatar-image",{attrs:{width:32,userid:e.userId,"user-name":e.user.displayname}}),e._v(" "),n("span",{staticClass:"profile-info-wrapper",class:{"oc-py-xs":!e.user.email}},[n("span",{domProps:{textContent:e._s(e.user.displayname)}}),e._v(" "),e.user.email?n("br"):e._e(),e._v(" "),e.user.email?n("span",{staticClass:"oc-text-small",domProps:{textContent:e._s(e.user.email)}}):e._e()])],1)],1),e._v(" "),e._l(e.applicationsList,(function(t,i){return n("li",{key:"user-menu-"+i},[t.url?n("oc-button",{attrs:{type:"a",appearance:"raw",target:t.target,href:t.url}},[n("oc-icon",{staticClass:"oc-p-xs",attrs:{name:t.icon}}),e._v(" "),n("translate",[e._v(e._s(t.title))])],1):n("oc-button",{attrs:{type:"router-link",appearance:"raw",to:{path:t.path}}},[n("oc-icon",{staticClass:"oc-p-xs",attrs:{name:t.icon}}),e._v(" "),n("translate",[e._v(e._s(t.title))])],1)],1)})),e._v(" "),n("li",[n("oc-button",{attrs:{id:"oc-topbar-account-logout",appearance:"raw"},on:{click:e.logout}},[n("oc-icon",{staticClass:"oc-p-xs",attrs:{name:"logout-box-r","fill-type":"line"}}),e._v(" "),n("translate",[e._v("Log out")])],1)],1),e._v(" "),e.quotaEnabled?n("li",{staticClass:"storage-wrapper oc-pl-s"},[n("oc-icon",{staticClass:"oc-p-xs",attrs:{name:"cloud","fill-type":"line"}}),e._v(" "),n("div",{staticClass:"storage-wrapper-text"},[n("p",{staticClass:"oc-my-rm"},[n("span",{domProps:{textContent:e._s(e.personalStorageLabel)}}),e._v(" "),n("br"),e._v(" "),n("span",{staticClass:"oc-text-small",domProps:{textContent:e._s(e.personalStorageDetailsLabel)}})]),e._v(" "),e.limitedPersonalStorage?n("oc-progress",{attrs:{value:e.quotaUsagePercent,max:100,size:"small",variation:e.quotaProgressVariant}}):e._e()],1)],1):e._e()],2)],1)],1):e._e()};I._withStripped=!0;const x=t.normalizeComponent({render:I,staticRenderFns:[]},undefined,E,"data-v-95b6f80e",false,undefined,!1,void 0,void 0,void 0);const P={computed:{...t.mapGetters(["activeNotifications","configuration"]),notificationsLabel(){return this.$gettext("Notifications")}},methods:{...t.mapActions(["deleteNotification","showMessage"]),executeRequest(e,t,n,i){this.$client.requests.ocs({service:"apps/"+e,action:t.slice(t.lastIndexOf("api")),method:n}).then((e=>{this.deleteNotification({client:this.$client,notification:i}),e.json().then((e=>{e.ocs.data.forEach((e=>{const t=this.$route.params.item?`/${this.$route.params.item}`:"/",{state:n,path:i,file_target:o}=e;if(n===r.ShareStatus.accepted&&o)a.eventBus.publish("app.files.list.load");else if(i){i.slice(0,i.lastIndexOf("/")+1)===t&&a.eventBus.publish("app.files.list.load")}}))}))}))},shouldDisplayLink:e=>e.link&&"local_share"!==e.object_type}};var A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"oc-flex oc-flex-middle",attrs:{id:"oc-notification"}},[n("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.notificationsLabel,expression:"notificationsLabel"}],attrs:{id:"oc-notification-bell",appearance:"raw",variation:"inverse","aria-label":e.notificationsLabel}},[n("oc-icon",{staticClass:"oc-cursor-pointer oc-flex oc-flex-middle",attrs:{name:"notification-3","fill-type":"line"}})],1),e._v(" "),n("oc-drop",{staticClass:"oc-overflow-auto oc-width-3-4 oc-width-large@s",attrs:{id:"oc-notification-drop","drop-id":"notifications-dropdown",toggle:"#oc-notification-bell",mode:"click",options:{pos:"bottom-right",delayHide:0},"padding-size":"small"}},e._l(e.activeNotifications,(function(t,i){return n("div",{key:i,staticClass:"oc-width-1-1"},[n("h4",{domProps:{textContent:e._s(t.subject)}}),e._v(" "),t.message?n("p",{staticClass:"oc-text-small"},[e._v(e._s(t.message))]):e._e(),e._v(" "),n("p",[e.shouldDisplayLink(t)?n("a",{attrs:{href:t.link,target:"_blank"}},[e._v(e._s(t.link))]):e._e()]),e._v(" "),n("div",{staticClass:"oc-width-1-1 oc-flex-right"},[0!==t.actions.length?e._l(t.actions,(function(a,o){return n("oc-button",{key:i+"-"+o,staticClass:"oc-ml-s",attrs:{size:"small",variation:a.primary?"primary":"passive",appearance:"filled"},on:{click:function(n){return n.preventDefault(),e.executeRequest(t.app,a.link,a.type,t.notification_id)}}},[e._v(e._s(a.label))])})):n("oc-button",{attrs:{id:"resolve-notification-button",size:"small"},on:{"~click":function(n){return n.preventDefault(),e.deleteNotification({client:e.$client,notification:t.notification_id})}}},[e._v("\n          Mark as read\n        ")])],2),e._v(" "),i+1!==e.activeNotifications.length?n("hr"):e._e()])})),0)],1)};A._withStripped=!0;const T=t.normalizeComponent({render:A,staticRenderFns:[]},undefined,P,"data-v-65b18008",false,undefined,!1,void 0,void 0,void 0);const R={name:"FeedbackLink",props:{href:{type:String,required:!1,default:null},ariaLabel:{type:String,required:!1,default:null},description:{type:String,required:!1,default:null}},computed:{hrefOrFallback:function(){return this.href||"https://owncloud.com/web-design-feedback"},ariaLabelOrFallback:function(){return this.ariaLabel||this.$gettext("ownCloud feedback survey")},descriptionOrFallback:function(){return this.description||this.$gettext("Provide your feedback: We'd like to improve the web design and would be happy to hear your feedback. Thank you! Your ownCloud team.")}}};var L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"oc-flex"},[n("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.descriptionOrFallback,expression:"descriptionOrFallback"}],attrs:{type:"a",href:e.hrefOrFallback,target:"_blank",appearance:"raw",variation:"inverse","aria-label":e.ariaLabelOrFallback,"aria-describedby":"oc-feedback-link-description"}},[n("oc-icon",{attrs:{name:"feedback"}})],1),e._v(" "),n("p",{staticClass:"oc-invisible-sr",attrs:{id:"oc-feedback-link-description"},domProps:{textContent:e._s(e.descriptionOrFallback)}})],1)};L._withStripped=!0;const N=t.normalizeComponent({render:L,staticRenderFns:[]},undefined,R,undefined,false,undefined,!1,void 0,void 0,void 0),D="default",F="default-dark",U=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?F:D;const M={setup:function(){var e=a.useStore(),n=c.useLocalStorage("oc_currentThemeName",U()),o=t.computed((function(){return e.getters.configuration.themes[t.unref(n)]})),r=function(e){for(var t in e.designTokens.colorPalette)document.querySelector(":root").style.setProperty("--oc-color-".concat(t),e.designTokens.colorPalette[t])};return t.watch(n,i._asyncToGenerator(i._regeneratorRuntime().mark((function n(){return i._regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.dispatch("loadTheme",{theme:t.unref(o)});case 2:r(t.unref(o));case 3:case"end":return n.stop()}}),n)})))),{currentThemeName:n,currentTheme:o}},computed:i._objectSpread2(i._objectSpread2({},t.mapGetters(["configuration"])),{},{isLightTheme:function(){return[null,D].includes(this.currentThemeName)},buttonLabel:function(){return this.$gettext("Click to switch theme")},switchIcon:function(){return this.isLightTheme?"sun":"moon-clear"},switchLabel:function(){return this.$gettext("Currently used theme")}}),methods:{toggleTheme:function(){this.currentThemeName=this.isLightTheme?F:D}}};var $=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.buttonLabel,expression:"buttonLabel"}],staticClass:"themeswitcher-btn",attrs:{"aria-label":e.buttonLabel,appearance:"raw",variation:"inverse"},on:{click:e.toggleTheme}},[n("span",{staticClass:"oc-visible@s",attrs:{"aria-label":e.switchLabel}}),e._v(" "),n("oc-icon",{attrs:{name:e.switchIcon,"fill-type":"line"}})],1)};$._withStripped=!0;const O={components:{ApplicationsMenu:_,FeedbackLink:N,Notifications:T,ThemeSwitcher:t.normalizeComponent({render:$,staticRenderFns:[]},undefined,M,undefined,false,undefined,!1,void 0,void 0,void 0),UserMenu:x},mixins:[y],props:{applicationsList:{type:Array,required:!1,default:function(){return[]}},activeNotifications:{type:[Array,Boolean],required:!1,default:function(){return[]}}},computed:i._objectSpread2(i._objectSpread2({},t.mapGetters(["configuration","user"])),{},{activeRoutePath:function(){return this.$router.resolve(this.$route).location.path},appMenuItems:function(){return this.navigation_getMenuItems([null,"apps","appSwitcher"],this.activeRoutePath)},userMenuItems:function(){return this.navigation_getMenuItems(["user"],this.activeRoutePath)},darkThemeAvailable:function(){return this.configuration.themes.default&&this.configuration.themes["default-dark"]},sidebarLogoAlt:function(){return this.$gettext("Navigate to personal files page")},logoImage:function(){return this.configuration.currentTheme.logo.topbar},isFeedbackLinkEnabled:function(){var e,t;return!(null!==(e=this.configuration)&&void 0!==e&&null!==(t=e.options)&&void 0!==t&&t.disableFeedbackLink)},feedbackLinkOptions:function(){var e,t,n=null===(e=this.configuration)||void 0===e||null===(t=e.options)||void 0===t?void 0:t.feedbackLink;return this.isFeedbackLinkEnabled&&n?i._objectSpread2(i._objectSpread2(i._objectSpread2({},n.href&&{href:n.href}),n.ariaLabel&&{ariaLabel:n.ariaLabel}),n.description&&{description:n.description}):{}},isNotificationBellEnabled:function(){var e;return(null===(e=this.user)||void 0===e?void 0:e.id)&&this.activeNotifications.length},isUserMenuEnabled:function(){var e;return null===(e=this.user)||void 0===e?void 0:e.id}})};var z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"oc-flex oc-flex-middle oc-flex-between oc-px-m",attrs:{id:"oc-topbar","aria-label":e.$gettext("Top bar")}},[n("div",{staticClass:"oc-topbar-left oc-flex oc-flex-middle oc-flex-between"},[e.appMenuItems.length?n("applications-menu",{attrs:{"applications-list":e.appMenuItems}}):e._e(),e._v(" "),n("router-link",{ref:"navigationSidebarLogo",attrs:{to:"/"}},[n("oc-img",{staticClass:"oc-logo-image",attrs:{src:e.logoImage,alt:e.sidebarLogoAlt}})],1)],1),e._v(" "),n("div",{staticClass:"portal-wrapper"},[n("portal-target",{attrs:{name:"app.runtime.header",multiple:""}})],1),e._v(" "),n("div",{staticClass:"oc-topbar-right oc-flex oc-flex-middle oc-flex-between"},[e.darkThemeAvailable?n("theme-switcher"):e._e(),e._v(" "),e.isFeedbackLinkEnabled?n("feedback-link",e._b({},"feedback-link",e.feedbackLinkOptions,!1)):e._e(),e._v(" "),e.isNotificationBellEnabled?n("notifications"):e._e(),e._v(" "),e.isUserMenuEnabled?n("user-menu",{attrs:{"applications-list":e.userMenuItems}}):e._e()],1)])};z._withStripped=!0;const B=t.normalizeComponent({render:z,staticRenderFns:[]},undefined,O,undefined,false,undefined,!1,void 0,void 0,void 0);const j={props:{activeMessages:{type:Array,required:!1,default:function(){return[]}}},computed:i._objectSpread2(i._objectSpread2({},t.mapGetters(["configuration"])),{},{notificationPosition:function(){return this.configuration.options.topCenterNotifications?"top-center":"default"},$_ocMessages_limited:function(){return this.activeMessages?this.activeMessages.slice(0,5):[]}}),methods:{deleteMessage:function(e){this.$emit("deleteMessage",e)}}};var V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("oc-notifications",{attrs:{position:e.notificationPosition}},e._l(e.$_ocMessages_limited,(function(t){return n("oc-notification-message",{key:t.id,attrs:{title:t.title,message:t.desc,status:t.status},on:{close:function(n){return e.deleteMessage(t)}}})})),1)};V._withStripped=!0;const q=t.normalizeComponent({render:V,staticRenderFns:[]},undefined,j,undefined,false,undefined,!1,void 0,void 0,void 0);const G={props:{name:{type:String,required:!0},index:{type:String,required:!0},active:{type:Boolean,required:!1,default:!1},target:{type:String,required:!1,default:null},icon:{type:String,required:!0},fillType:{type:String,required:!1,default:"fill"},collapsed:{type:Boolean,required:!1,default:!1},tag:{type:String,required:!1,default:null}},computed:{navName:function(){var e;return t.get(null===(e=this.$router)||void 0===e?void 0:e.resolve(this.target),"route.name")},toolTip:function(){return{content:this.collapsed?this.$gettextInterpolate(this.$gettext("Navigate to %{ pageName } page"),{pageName:this.name}):"",placement:"right",arrow:!1}}},watch:{active:function(e){e&&this.animateHighlightPosition(this.index)}},mounted:function(){this.active&&this.animateHighlightPosition(this.index)},methods:{animateHighlightPosition:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=document.getElementById("nav-highlighter");if(n){var i=this.$refs.item,a=i.offsetTop,o=n.style;o.setProperty("transition-duration","".concat(t,"s")),o.setProperty("transform","translateY(".concat(a,"px)"))}}}};var H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{ref:"item",staticClass:"oc-sidebar-nav-item oc-pb-xs oc-px-s",attrs:{"aria-current":e.active?"page":null}},[n("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.toolTip,expression:"toolTip"}],class:["oc-sidebar-nav-item-link",{active:e.active}],attrs:{type:"router-link",appearance:"raw",variation:e.active?"inverse":"passive",to:e.target,"data-nav-id":e.index,"data-nav-name":e.navName}},[n("span",{staticClass:"oc-flex"},[n("oc-icon",{attrs:{name:e.icon,"fill-type":e.fillType}}),e._v(" "),n("span",{staticClass:"oc-ml-m text",class:{"text-invisible":e.collapsed},domProps:{textContent:e._s(e.name)}})],1),e._v(" "),e.tag?n("oc-tag",{staticClass:"oc-py-rm",attrs:{size:"small"}},[e._v(e._s(e.tag))]):e._e()],1)],1)};H._withStripped=!0;const W={components:{SidebarNavItem:t.normalizeComponent({render:H,staticRenderFns:[]},undefined,G,undefined,false,undefined,!1,void 0,void 0,void 0)},props:{navItems:{type:Array,required:!0}},computed:i._objectSpread2(i._objectSpread2({},t.mapState(["navigation"])),{},{toggleSidebarButtonClass:function(){return this.navigation.closed?"toggle-sidebar-button-collapsed":"toggle-sidebar-button-expanded oc-pr-s"},toggleSidebarButtonIcon:function(){return this.navigation.closed?"arrow-drop-right":"arrow-drop-left"},isAnyNavItemActive:function(){return this.navItems.some((function(e){return!0===e.active}))}}),mounted:function(){var e=document.getElementById("web-nav-sidebar"),t=document.getElementById("nav-highlighter");if(t&&e){var n=new ResizeObserver((function(){var e=document.getElementsByClassName("oc-sidebar-nav-item-link")[0];e&&(t.style.setProperty("transition-duration","0.05s"),t.style.setProperty("width","".concat(e.clientWidth,"px")),t.style.setProperty("height","".concat(e.clientHeight,"px")))}));n.observe(e),this.$on("beforeDestroy",(function(){n.disconnect()}))}},methods:i._objectSpread2(i._objectSpread2({},t.mapActions(["openNavigation","closeNavigation"])),{},{toggleSidebarButtonClick:function(){return this.navigation.closed?this.openNavigation():this.closeNavigation()},getUuid:function(){return t.v4().replaceAll("-","")}})};var J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{"oc-app-navigation-collapsed":e.navigation.closed,"oc-app-navigation-expanded":!e.navigation.closed},attrs:{id:"web-nav-sidebar"}},[n("oc-button",{staticClass:"toggle-sidebar-button oc-pb-s oc-pt-m",class:e.toggleSidebarButtonClass,attrs:{appearance:"raw","aria-label":e.$gettext("Toggle sidebar")},on:{click:e.toggleSidebarButtonClick}},[n("oc-icon",{attrs:{size:"large","fill-type":"line",name:e.toggleSidebarButtonIcon}})],1),e._v(" "),n("nav",{staticClass:"oc-sidebar-nav oc-mb-m oc-mt-s oc-px-xs",attrs:{"aria-label":e.$gettext("Sidebar navigation menu")}},[n("oc-list",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isAnyNavItemActive,expression:"isAnyNavItemActive"}],staticClass:"oc-ml-s oc-background-primary-gradient",attrs:{id:"nav-highlighter"}}),e._v(" "),e._l(e.navItems,(function(t){return n("sidebar-nav-item",{key:t.route.path,attrs:{index:e.getUuid(),target:t.route.path,active:t.active,icon:t.icon,"fill-type":t.fillType,name:t.name,collapsed:e.navigation.closed,tag:t.tag}})}))],2)],1),e._v(" "),e._t("bottom")],2)};J._withStripped=!0;const X=t.normalizeComponent({render:J,staticRenderFns:[]},undefined,W,undefined,false,undefined,!1,void 0,void 0,void 0);const K=t.defineComponent({setup:()=>({hasShareJail:l.useCapabilityShareJailEnabled()}),data:()=>({showInfo:!1,infoExpanded:!1,uploads:{},errors:{},successful:[],filesInProgressCount:0,totalProgress:0,uploadsPaused:!1,uploadsCancelled:!1,inFinalization:!1,inPreparation:!0,runningUploads:0,bytesTotal:0,bytesUploaded:0,filesInEstimation:{},timeStarted:null,remainingTime:void 0}),computed:{...t.mapGetters(["configuration"]),uploadInfoTitle(){return this.filesInProgressCount&&!this.inPreparation?this.$gettextInterpolate(this.$ngettext("%{ filesInProgressCount } item uploading...","%{ filesInProgressCount } items uploading...",this.filesInProgressCount),{filesInProgressCount:this.filesInProgressCount}):this.uploadsCancelled?this.$gettext("Upload cancelled"):Object.keys(this.errors).length?this.$gettext("Upload failed"):this.runningUploads?this.$gettext("Preparing upload..."):this.$gettext("Upload complete")},uploadingLabel(){if(Object.keys(this.errors).length){const e=this.successful.length+Object.keys(this.errors).length;return this.$gettextInterpolate(this.$ngettext("%{ errors } of %{ uploads } item failed","%{ errors } of %{ uploads } items failed",e),{uploads:e,errors:Object.keys(this.errors).length})}return this.$gettextInterpolate(this.$ngettext("%{ successfulUploads } item uploaded","%{ successfulUploads } items uploaded",this.successful.length),{successfulUploads:this.successful.length})},displayThumbnails(){return!this.configuration?.options?.disablePreviews},uploadsPausable(){return this.$uppyService.tusActive()}},created(){this.$uppyService.subscribe("uploadStarted",(()=>{this.remainingTime||(this.remainingTime=this.$gettext("Calculating estimated time...")),!this.runningUploads&&this.showInfo&&this.cleanOverlay(),this.showInfo=!0,this.runningUploads+=1,this.inFinalization=!1})),this.$uppyService.subscribe("addedForUpload",(e=>{this.filesInProgressCount+=e.filter((e=>!e.isFolder)).length;for(const t of e){t.data?.size&&(this.bytesTotal+=t.data.size);const{relativeFolder:e,uploadId:n,topLevelFolderId:i}=t.meta,a=!e;a&&(this.uploads[n]=t,t.isFolder&&void 0===this.uploads[n].filesCount&&(this.uploads[n].filesCount=0,this.uploads[n].errorCount=0,this.uploads[n].successCount=0)),t.isFolder||a||!this.uploads[i]||(this.uploads[i].filesCount+=1)}})),this.$uppyService.subscribe("uploadCompleted",(()=>{this.runningUploads-=1,this.runningUploads||this.resetProgress()})),this.$uppyService.subscribe("progress",(e=>{this.totalProgress=e})),this.$uppyService.subscribe("upload-progress",(({file:e,progress:t})=>{this.timeStarted||(this.timeStarted=new Date,this.inPreparation=!1),void 0===this.filesInEstimation[e.meta.uploadId]&&(this.filesInEstimation[e.meta.uploadId]=0);const n=t.bytesUploaded-this.filesInEstimation[e.meta.uploadId];this.bytesUploaded+=n,this.filesInEstimation[e.meta.uploadId]=t.bytesUploaded;const i=+new Date-this.timeStarted,a=100*this.bytesUploaded/this.bytesTotal;if(0===a)return;const o=i/a*100-i;this.remainingTime=this.getRemainingTime(o),100===a&&(this.inFinalization=!0)})),this.$uppyService.subscribe("uploadError",(({file:e,error:t})=>{this.errors[e.meta.uploadId]||(this.uploads[e.meta.uploadId]||(this.uploads[e.meta.uploadId]=e),e.meta.relativePath?this.uploads[e.meta.uploadId].path=e.meta.relativePath:this.uploads[e.meta.uploadId].path=r.urlJoin(e.meta.currentFolder,e.name),this.uploads[e.meta.uploadId].targetRoute=e.meta.route,this.uploads[e.meta.uploadId].status="error",this.errors[e.meta.uploadId]=t,this.filesInProgressCount-=1,e.meta.topLevelFolderId&&this.handleTopLevelFolderUpdate(e,"error"))})),this.$uppyService.subscribe("uploadSuccess",(e=>{if(this.uploads[e.meta.uploadId]){if(e.meta.relativeFolder)return e.isFolder||(this.successful.push(e.meta.uploadId),this.filesInProgressCount-=1,e.meta.topLevelFolderId&&this.handleTopLevelFolderUpdate(e,"success")),void delete this.uploads[e.meta.uploadId];this.uploads[e.meta.uploadId]=e,this.uploads[e.meta.uploadId].path=r.urlJoin(e.meta.currentFolder,e.name),this.uploads[e.meta.uploadId].targetRoute=this.buildRouteFromUppyResource(e),e.isFolder||(this.uploads[e.meta.uploadId].status="success",this.successful.push(e.meta.uploadId),this.filesInProgressCount-=1)}else e.isFolder||(this.successful.push(e.meta.uploadId),this.filesInProgressCount-=1,e.meta.topLevelFolderId&&this.handleTopLevelFolderUpdate(e,"success"))}))},methods:{getRemainingTime(e){const t=Math.round(e/1e3/60);if(t>=1&&t<60)return this.$gettextInterpolate(this.$ngettext("%{ roundedRemainingMinutes } minute left","%{ roundedRemainingMinutes } minutes left",t),{roundedRemainingMinutes:t});const n=Math.round(e/1e3/60/60);return n>0?this.$gettextInterpolate(this.$ngettext("%{ roundedRemainingHours } hour left","%{ roundedRemainingHours } hours left",n),{roundedRemainingHours:n}):this.$gettext("Few seconds left")},handleTopLevelFolderUpdate(e,t){const n=this.uploads[e.meta.topLevelFolderId];"success"===t?n.successCount+=1:n.errorCount+=1,n.successCount+n.errorCount===n.filesCount&&(n.status=n.errorCount?"error":"success")},closeInfo(){this.showInfo=!1,this.infoExpanded=!1,this.cleanOverlay(),this.resetProgress()},cleanOverlay(){this.uploadsCancelled=!1,this.uploads={},this.errors={},this.successful=[],this.filesInProgressCount=0,this.runningUploads=0},resetProgress(){this.bytesTotal=0,this.bytesUploaded=0,this.filesInEstimation={},this.timeStarted=null,this.remainingTime=void 0,this.inPreparation=!0,this.inFinalization=!1},displayFileAsResource:e=>!!e.targetRoute,isResourceClickable:e=>!0===e.isFolder,folderLink:e=>e.isFolder?{...e.targetRoute,params:{...e.targetRoute.params,driveAliasAndItem:r.urlJoin(e.targetRoute.params.driveAliasAndItem,e.name,{leadingSlash:!1})},query:{...e.targetRoute.query,...a.configurationManager.options.routing.idBased&&!t.isUndefined(e.meta.fileId)&&{fileId:e.meta.fileId}}}:{},parentFolderLink:e=>({...e.targetRoute,query:{...e.targetRoute.query,...a.configurationManager.options.routing.idBased&&!t.isUndefined(e.meta.currentFolderId)&&{fileId:e.meta.currentFolderId}}}),buildRouteFromUppyResource:e=>e.meta.routeName?{name:e.meta.routeName,params:{driveAliasAndItem:e.meta.routeDriveAliasAndItem},query:{...e.meta.routeShareId&&{shareId:e.meta.routeShareId}}}:null,defaultParentFolderName(e){const{meta:{spaceName:t,driveType:n}}=e;return this.hasShareJail?"personal"===n?this.$gettext("Personal"):"public"===n?this.$gettext("Public link"):t:this.$gettext("All files and folders")},toggleInfo(){this.infoExpanded=!this.infoExpanded},retryUploads(){this.filesInProgressCount+=Object.keys(this.errors).length,this.runningUploads+=1;for(const e of Object.keys(this.errors)){this.uploads[e].status=void 0;const t=this.uploads[e].meta.topLevelFolderId;t&&(this.uploads[t].status=void 0,this.uploads[t].errorCount=0)}this.errors={},this.$uppyService.retryAllUploads()},togglePauseUploads(){this.uploadsPaused?(this.$uppyService.resumeAllUploads(),this.timeStarted=null):this.$uppyService.pauseAllUploads(),this.uploadsPaused=!this.uploadsPaused},cancelAllUploads(){this.uploadsCancelled=!0,this.filesInProgressCount=0,this.runningUploads=0,this.resetProgress(),this.$uppyService.cancelAllUploads();const e=Object.values(this.uploads).filter((e=>"success"!==e.status&&"error"!==e.status));for(const t of e)this.uploads[t.meta.uploadId].status="cancelled"},getUploadItemMessage(e){const t=this.errors[e.meta.uploadId];if(t){let e=this.$gettext("Unknown error");return t.message.includes("response code: 507")&&(e=this.$gettext("Quota exceeded")),t.message.includes("precondition failed:")&&(e=this.$gettext("Unknown error")),e}},getUploadItemClass(e){return this.errors[e.meta.uploadId]?"upload-info-danger":"upload-info-success"}}});var Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.showInfo?n("div",{staticClass:"oc-rounded oc-box-shadow-medium",attrs:{id:"upload-info"}},[n("div",{staticClass:"upload-info-title oc-flex oc-flex-between oc-flex-middle oc-px-m oc-py-s oc-rounded-top"},[n("p",{staticClass:"oc-my-xs",domProps:{textContent:e._s(e.uploadInfoTitle)}}),e._v(" "),e.filesInProgressCount?e._e():n("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.$gettext("Close"),expression:"$gettext('Close')"}],attrs:{id:"close-upload-info-btn",appearance:"raw",variation:"inverse"},on:{click:e.closeInfo}},[n("oc-icon",{attrs:{name:"close"}})],1)],1),e._v(" "),n("div",{staticClass:"upload-info-status oc-px-m oc-pt-m oc-flex oc-flex-between oc-flex-middle",class:{"oc-pb-m":!e.runningUploads}},[e.runningUploads?n("div",{staticClass:"oc-flex oc-flex-middle"},[n("oc-spinner",{staticClass:"oc-mr-s",attrs:{size:"small"}}),e._v(" "),n("span",{staticClass:"oc-text-small oc-text-muted",domProps:{textContent:e._s(e.remainingTime)}})],1):n("div",{staticClass:"upload-info-label",class:{"upload-info-danger":Object.keys(e.errors).length&&!e.uploadsCancelled,"upload-info-success":!Object.keys(e.errors).length&&!e.uploadsCancelled}},[e._v("\n      "+e._s(e.uploadingLabel)+"\n    ")]),e._v(" "),n("div",{staticClass:"oc-flex"},[n("oc-button",{staticClass:"oc-text-muted oc-text-small upload-info-toggle-details-btn",attrs:{appearance:"raw"},domProps:{textContent:e._s(e.infoExpanded?e.$gettext("Hide details"):e.$gettext("Show details"))},on:{click:e.toggleInfo}}),e._v(" "),!e.runningUploads&&Object.keys(e.errors).length?n("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.$gettext("Retry all failed uploads"),expression:"$gettext('Retry all failed uploads')"}],staticClass:"oc-ml-s",attrs:{appearance:"raw","aria-label":e.$gettext("Retry all failed uploads")},on:{click:e.retryUploads}},[n("oc-icon",{attrs:{name:"restart","fill-type":"line"}})],1):e._e(),e._v(" "),e.runningUploads&&e.uploadsPausable&&!e.inPreparation&&!e.inFinalization?n("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.uploadsPaused?e.$gettext("Resume upload"):e.$gettext("Pause upload"),expression:"uploadsPaused ? $gettext('Resume upload') : $gettext('Pause upload')"}],staticClass:"oc-ml-s",attrs:{id:"pause-upload-info-btn",appearance:"raw"},on:{click:e.togglePauseUploads}},[n("oc-icon",{attrs:{name:e.uploadsPaused?"play-circle":"pause-circle","fill-type":"line"}})],1):e._e(),e._v(" "),!e.runningUploads||e.inPreparation||e.inFinalization?e._e():n("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.$gettext("Cancel upload"),expression:"$gettext('Cancel upload')"}],staticClass:"oc-ml-s",attrs:{id:"cancel-upload-info-btn",appearance:"raw"},on:{click:e.cancelAllUploads}},[n("oc-icon",{attrs:{name:"close-circle","fill-type":"line"}})],1)],1)]),e._v(" "),e.runningUploads?n("div",{staticClass:"upload-info-progress oc-mx-m oc-pb-m oc-mt-s"},[n("oc-progress",{attrs:{value:e.totalProgress,max:100,size:"small",indeterminate:!e.filesInProgressCount}})],1):e._e(),e._v(" "),e.infoExpanded?n("div",{staticClass:"upload-info-items oc-px-m oc-pb-m"},[n("ul",{staticClass:"oc-list"},e._l(e.uploads,(function(t,i){return n("li",{key:i,class:{"oc-mb-s":i!==Object.keys(e.uploads).length-1}},[n("span",{staticClass:"oc-flex oc-flex-middle"},["error"===t.status?n("oc-icon",{attrs:{name:"close",variation:"danger",size:"small"}}):"success"===t.status?n("oc-icon",{attrs:{name:"check",variation:"success",size:"small"}}):"cancelled"===t.status?n("oc-icon",{attrs:{name:"close",size:"small"}}):e.uploadsPaused?n("oc-icon",{attrs:{name:"pause",size:"small"}}):n("div",{staticClass:"oc-flex"},[n("oc-spinner",{attrs:{size:"small"}})],1),e._v(" "),e.displayFileAsResource(t)?n("oc-resource",{key:t.path,staticClass:"oc-ml-s",attrs:{resource:t,"is-path-displayed":!0,"is-thumbnail-displayed":e.displayThumbnails,"is-resource-clickable":e.isResourceClickable(t),"parent-folder-name-default":e.defaultParentFolderName(t),"folder-link":e.folderLink(t),"parent-folder-link":e.parentFolderLink(t)}}):n("span",{staticClass:"oc-flex oc-flex-middle oc-text-truncate"},[n("oc-resource-icon",{staticClass:"file_info__icon oc-mx-s",attrs:{resource:t,size:"large"}}),e._v(" "),n("oc-resource-name",{attrs:{name:t.name,extension:t.extension,type:t.type,"full-path":"","is-path-displayed":!1}})],1)],1),e._v(" "),e.getUploadItemMessage(t)?n("span",{staticClass:"upload-info-message oc-ml-xs oc-text-small",class:e.getUploadItemClass(t),domProps:{textContent:e._s(e.getUploadItemMessage(t))}}):e._e()])})),0)]):e._e()]):e._e()};Q._withStripped=!0;const Y=t.normalizeComponent({render:Q,staticRenderFns:[]},undefined,K,undefined,false,undefined,!1,void 0,void 0,void 0);const Z=t.defineComponent({name:"ApplicationLayout",components:{AppLoadingSpinner:n.__vue_component__,MessageBar:q,TopBar:B,SidebarNav:X,UploadInfo:Y},setup(){const e=a.useStore();t.watch(l.useRoute(),(e=>{e.matched.length&&e.matched.forEach((t=>{const n=Object.keys(t.components).filter((e=>"default"!==e));n.length&&console.warn(`named components are deprecated, use "default" instead of "${n.join(", ")}" on route ${e.name}`)}))}),{immediate:!0});const n=u.useRouteMeta("authContext"),{areSpacesLoading:i}=l.useSpacesLoading({store:e});return{isLoading:t.computed((()=>"anonymous"!==t.unref(n)&&t.unref(i))),activeApp:c.useActiveApp(),isUserContext:d.useUserContext({store:e})}},data:()=>({windowWidth:0}),computed:{...t.mapGetters(["apps","activeMessages","activeNotifications","capabilities","configuration","getExtensionsWithNavItems","getNavItemsByExtension"]),isIE11:()=>!!window.MSInputMethodContext&&!!document.documentMode,ieDeprecationWarning(){return this.$gettext("Internet Explorer (your current browser) is not officially supported. For security reasons, please switch to another browser.")},isSidebarVisible(){return this.sidebarNavItems.length&&this.windowWidth>=640},sidebarNavItems(){if(!this.isUserContext)return[];const e=this.getNavItemsByExtension(this.activeApp);if(!e)return[];const{href:t}=this.$router.resolve(this.$route);return e.map((e=>{const n=[e.route,...e.activeFor||[]].filter(Boolean).reduce(((e,n)=>{if(e)return!0;try{const e=this.$router.resolve(n).href;return t.startsWith(e)}catch(e){return console.error(e),!1}}),!1),i="function"==typeof e.name?e.name(this.capabilities):e.name;return{...e,name:this.$gettext(i),active:n}}))},applicationsList(){const e=[];return this.getExtensionsWithNavItems.forEach((t=>{e.push({...this.apps[t],type:"extension"})})),this.configuration.applications.forEach((t=>{e.push({...t,type:"link"})})),e}},mounted(){this.$nextTick((()=>{window.addEventListener("resize",this.onResize),this.onResize()}))},beforeDestroy(){window.removeEventListener("resize",this.onResize)},methods:{...t.mapActions(["deleteMessage"]),onResize(){this.windowWidth=window.innerWidth}}});var ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"web-content"}},[n("div",{attrs:{id:"web-content-header"}},[e.isIE11?n("div",{staticClass:"oc-background-muted oc-text-center oc-py-m"},[n("p",{staticClass:"oc-m-rm",domProps:{textContent:e._s(e.ieDeprecationWarning)}})]):e._e(),e._v(" "),n("top-bar",{attrs:{"applications-list":e.applicationsList,"active-notifications":e.activeNotifications}})],1),e._v(" "),n("div",{staticClass:"oc-px-s oc-pb-s",attrs:{id:"web-content-main"}},[n("div",{staticClass:"app-container oc-flex"},[e.isSidebarVisible?n("sidebar-nav",{staticClass:"app-navigation",attrs:{"nav-items":e.sidebarNavItems}}):e._e(),e._v(" "),e.isLoading?n("app-loading-spinner"):e._l(["default","app","fullscreen"],(function(e){return n("router-view",{key:"router-view-"+e,staticClass:"app-content oc-width-1-1",attrs:{name:e}})}))],2)]),e._v(" "),n("div",{staticClass:"snackbars"},[n("message-bar",{attrs:{"active-messages":e.activeMessages},on:{deleteMessage:e.deleteMessage}}),e._v(" "),n("upload-info")],1)])};ee._withStripped=!0;const te=t.normalizeComponent({render:ee,staticRenderFns:[]},undefined,Z,undefined,false,undefined,!1,void 0,void 0,void 0);const ne={name:"LoadingLayout",computed:i._objectSpread2({},t.mapGetters(["configuration"]))};var ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loading-overlay oc-flex oc-flex-middle oc-flex-center",style:{backgroundImage:"url("+e.configuration.currentTheme.loginPage.backgroundImg+")"}},[n("oc-spinner",{attrs:{size:"xlarge","aria-label":e.$gettext("Loading")}})],1)};ie._withStripped=!0;const ae=t.normalizeComponent({render:ie,staticRenderFns:[]},undefined,ne,undefined,false,undefined,!1,void 0,void 0,void 0);const oe=t.defineComponent({name:"PlainLayout",setup(){const e=a.useStore(),{$gettext:n}=p.useTranslations(),i=u.useRouteMeta("title");return{pageTitle:t.computed((()=>n(t.unref(i)))),backgroundImg:t.computed((()=>e.getters.configuration?.currentTheme?.loginPage?.backgroundImg))}}});var re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"oc-login oc-height-viewport",style:{backgroundImage:"url("+e.backgroundImg+")"}},[n("h1",{staticClass:"oc-invisible-sr",domProps:{textContent:e._s(e.pageTitle)}}),e._v(" "),n("router-view")],1)};re._withStripped=!0;const se=t.normalizeComponent({render:re,staticRenderFns:[]},undefined,oe,undefined,false,undefined,!1,void 0,void 0,void 0),le=({store:e})=>{const t=e.getters.capabilities?.core?.status;if(!t||!t.versionstring)return;return`${t.product||"ownCloud"} ${t.productversion||t.versionstring} ${t.edition}`};const ce=t.defineComponent({components:{SkipTo:w},data:()=>({$_notificationsInterval:null,windowWidth:0,announcement:"",activeBlobStyle:{}}),computed:{...t.mapState(["route","user","modal","sidebar"]),...t.mapGetters(["configuration","capabilities","getSettingsValue"]),...t.mapGetters("runtime/auth",["isUserContextReady","isPublicLinkContextReady"]),layout(){return!this.$route.name||["login","logout","oidcCallback","oidcSilentRedirect","resolvePublicLink","accessDenied"].includes(this.$route.name)?se:s.isPublicLinkContext(this.$router,this.$route)?this.isPublicLinkContextReady?te:ae:s.isUserContext(this.$router,this.$route)?this.isUserContextReady?te:ae:te},favicon(){return this.configuration.currentTheme.logo.favicon},selectedLanguage(){return this.getSettingsValue({extension:"ocis-accounts",bundle:"profile",setting:"language"})||this.user.language}},watch:{$route:{immediate:!0,handler:function(e){const t=this.extractPageTitleFromRoute(e);if(!t)return;const{shortDocumentTitle:n,fullDocumentTitle:i}=t;this.announceRouteChange(n),document.title=i}},capabilities:{immediate:!0,handler:function(e){e?.notifications&&(this.$nextTick((()=>{this.$_updateNotifications()})),this.$_notificationsInterval=setInterval((()=>{this.$_updateNotifications()}),3e4))}},selectedLanguage:{immediate:!0,handler(e){let t=this.$language.defaultLanguage;e&&(t="object"==typeof e&&e.listValue.values.length>0?e.listValue.values[0].stringValue:e),t?.indexOf("_")&&(t=t.split("_")[0]),t&&(this.$language.current=t,document.documentElement.lang=t)}}},mounted(){a.eventBus.subscribe("runtime.documentTitle.changed",(({shortDocumentTitle:e,fullDocumentTitle:t})=>{document.title=t,this.announceRouteChange(e)}))},destroyed(){this.$_notificationsInterval&&clearInterval(this.$_notificationsInterval)},metaInfo(){const e={};this.favicon&&(e.link=[{rel:"icon",href:this.favicon}]);const t={name:"generator",content:["ownCloud Web UI 6.0.0",le({store:this.$store})].filter(Boolean).join(", ")};return e.meta=[t],e},methods:{...t.mapActions(["fetchNotifications"]),focusModal(e,t){this.focus({revert:"beforeDestroy"===t})},$_updateNotifications(){this.fetchNotifications(this.$client).catch((e=>{console.error("Error while loading notifications: ",e),clearInterval(this.$_notificationsInterval)}))},announceRouteChange(e){const t=this.$gettext("Navigated to %{ pageTitle }");this.announcement=this.$gettextInterpolate(t,{pageTitle:e})},extractPageTitleFromRoute(e){const t=e.meta.title?this.$gettext(e.meta.title):void 0;if(!t)return;const n=[t],i=this.configuration.currentTheme.general.name;return{shortDocumentTitle:n.join(" - "),fullDocumentTitle:[...n,i].join(" - ")}}}});var ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"web"}},[n("oc-hidden-announcer",{attrs:{announcement:e.announcement,level:"polite"}}),e._v(" "),n("skip-to",{attrs:{target:"web-content-main"}},[n("translate",[e._v("Skip to main")])],1),e._v(" "),n(e.layout,{tag:"component"}),e._v(" "),n("portal-target",{attrs:{name:"app.runtime.modal",multiple:""}}),e._v(" "),e.modal.displayed?n("oc-modal",{attrs:{variation:e.modal.variation,icon:e.modal.icon,title:e.modal.title,message:e.modal.message,"has-input":e.modal.hasInput,"input-description":e.modal.inputDescription,"input-disabled":e.modal.inputDisabled,"input-error":e.modal.inputError,"input-label":e.modal.inputLabel,"input-selection-range":e.modal.inputSelectionRange,"input-type":e.modal.inputType,"input-value":e.modal.inputValue,"button-secondary-text":e.modal.buttonSecondaryText,"button-cancel-text":e.modal.cancelText,"button-confirm-text":e.modal.confirmText,"button-confirm-disabled":e.modal.confirmDisabled||!!e.modal.inputError,"checkbox-label":e.modal.checkboxLabel,"contextual-helper-label":e.modal.contextualHelperLabel,"contextual-helper-data":e.modal.contextualHelperData},on:{cancel:e.modal.onCancel,confirm:e.modal.onConfirm,input:e.modal.onInput,"checkbox-changed":e.modal.onCheckboxValueChanged,"confirm-secondary":e.modal.onConfirmSecondary,mounted:e.focusModal,beforeDestroy:e.focusModal},scopedSlots:e._u([e.modal.customContent?{key:"content",fn:function(){return[n("div",{domProps:{innerHTML:e._s(e.modal.customContent)}})]},proxy:!0}:null],null,!0)}):e._e()],1)};ue._withStripped=!0;const de=t.normalizeComponent({render:ue,staticRenderFns:[]},undefined,ce,undefined,false,undefined,!1,void 0,void 0,void 0);const pe=t.defineComponent({name:"MissingConfigPage",setup(){const e=a.useStore();return{logoImg:t.computed((()=>e.getters.configuration?.currentTheme?.logo?.login)),footerSlogan:t.computed((()=>e.getters.configuration?.currentTheme?.general?.slogan)),favicon:t.computed((()=>e.getters.configuration?.currentTheme?.logo?.favicon))}},metaInfo(){const e={};this.favicon&&(e.link=[{rel:"icon",href:this.favicon}]);const t={name:"generator",content:["ownCloud Web UI 6.0.0",le({store:this.$store})].filter(Boolean).join(", ")};return e.meta=[t],e}});var me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"oc-login-card oc-position-center"},[n("img",{staticClass:"oc-login-logo",attrs:{src:e.logoImg,alt:"","aria-hidden":!0}}),e._v(" "),n("div",{staticClass:"oc-login-card-body"},[n("h1",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-login-card-title"},[e._v("Missing or invalid config")]),e._v(" "),n("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Please check if the file config.json exists and is correct.")]),e._v(" "),n("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Also, make sure to check the browser console for more information.")])]),e._v(" "),n("div",{staticClass:"oc-login-card-footer"},[n("p",[n("translate",[e._v("For help visit our")]),e._v(" "),n("a",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{href:"https://owncloud.dev/clients/web",target:"_blank"}},[e._v("documentation")]),e._v(" "),n("translate",[e._v("or join our")]),e._v(" "),n("a",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{href:"https://talk.owncloud.com/channel/web",target:"_blank"}},[e._v("chat")]),e._v(".\n    ")],1),e._v(" "),n("p",[e._v("\n      "+e._s(e.footerSlogan)+"\n    ")])])])};me._withStripped=!0;const he=t.normalizeComponent({render:me,staticRenderFns:[]},undefined,pe,undefined,false,undefined,!1,void 0,void 0,void 0);var fe={state:{messages:[],notifications:{loading:!0,failed:!1,data:[]},quickActions:{}},actions:{showMessage:function(e,t){(0,e.commit)("ENQUEUE_MESSAGE",t)},deleteMessage:function(e,t){e.commit("REMOVE_MESSAGE",t)},fetchNotifications:function(e,t){return e.commit("LOADING_NOTIFICATIONS",!0),t.requests.ocs({service:"apps/notifications",action:"api/v1/notifications"}).then((function(t){"0"!==t.headers.get("Content-Length")&&t.json().then((function(n){t.ok?e.commit("UPDATE_NOTIFICATIONS",n.ocs.data):e.commit("ERROR_NOTIFICATIONS",n.ocs.meta.message),e.commit("LOADING_NOTIFICATIONS",!1)}))})).catch((function(t){e.commit("ERROR_NOTIFICATIONS",t),e.commit("LOADING_NOTIFICATIONS",!1)}))},deleteNotification:function(e,t){var n=t.client,i=t.notification;n.requests.ocs({service:"apps/notifications",action:"api/v1/notifications/"+i,method:"DELETE"}).then((function(t){t.ok?e.commit("DELETE_NOTIFICATION",i):e.commit("ERROR_NOTIFICATIONS",t.ocs.meta.status)})).catch((function(t){e.commit("ERROR_NOTIFICATIONS",t)}))}},mutations:{ENQUEUE_MESSAGE:function(e,t){t.id||(t.id=Math.random().toString(36).slice(2,-1)),e.messages.push(t)},REMOVE_MESSAGE:function(e,t){e.messages.splice(e.messages.indexOf(t),1)},LOADING_NOTIFICATIONS:function(e,t){e.notifications.loading=t},ERROR_NOTIFICATIONS:function(e,t){e.notifications.failed=t},UPDATE_NOTIFICATIONS:function(e,t){e.notifications.data=t},DELETE_NOTIFICATION:function(e,t){var n=e.notifications.data.filter((function(e){return e.notification_id!==t}));e.notifications.data=n},ADD_QUICK_ACTIONS:function(e,t){e.quickActions=Object.assign(e.quickActions,t)}},getters:{activeMessages:function(e){return e.messages},activeNotifications:function(e){return!(!e.notifications.data.length||e.notifications.failed)&&e.notifications.data}}},ge={REGISTER_EXTENSION:function(e,t){var n=t.app,a=t.extension,o=i._objectSpread2({app:n,icon:a.icon,img:a.img,newTab:a.newTab||!1,routeName:a.routeName,routes:a.routes||[],extension:a.extension,mimeType:a.mimeType,handler:a.handler,canBeDefault:!1!==a.canBeDefault,config:(e.fileEditorConfigs||{})[n]},a.label&&{label:a.label});e.fileEditors.push(o),a.newFileMenu&&(a.newFileMenu.ext=a.extension,a.newFileMenu.action=o,a.newFileMenu.routes=a.routes,e.newFileHandlers.push(a.newFileMenu))},REGISTER_APP:function(e,t){var n=this;if(t.extensions&&t.extensions.forEach((function(e){n.commit("REGISTER_EXTENSION",{app:t.id,extension:e})})),t.fileSideBars){var a=e.fileSideBars;t.fileSideBars.forEach((function(e){a.push(e)})),e.fileSideBars=a}if(t.filesListIndicators){var o=e.customFilesListIndicators;t.filesListIndicators.forEach((function(e){o.push(e)})),e.customFilesListIndicators=o}if(t.id){var r=i._objectSpread2(i._objectSpread2({name:t.name||t.id,id:t.id,icon:t.icon||"check_box_outline_blank"},t.iconFillType&&{iconFillType:t.iconFillType}),{},{img:t.img||null,config:(e.fileEditorConfigs||{})[t.id]});e.meta[r.id]=r}},LOAD_EXTENSION_CONFIG:function(e,t){var n=t.id,a=t.config,o=i._objectSpread2({},e.fileEditorConfigs);o[n]=a,e.fileEditorConfigs=o}},ve={appIds:function(e){return Object.keys(e.meta)},apps:function(e){return e.meta},newFileHandlers:function(e){return e.newFileHandlers},fileSideBars:function(e){return e.fileSideBars},customFilesListIndicators:function(e){return e.customFilesListIndicators},extensionConfigByAppId:function(e){return function(t){return e.fileEditorConfigs[t]||{}}}};var be={namespaced:!0,state:{accessToken:null,userContextReady:!1,publicLinkToken:null,publicLinkPassword:null,publicLinkContextReady:!1},getters:{accessToken:e=>e.accessToken,isUserContextReady:e=>e.userContextReady,publicLinkToken:e=>e.publicLinkToken,publicLinkPassword:e=>e.publicLinkPassword,isPublicLinkContextReady:e=>e.publicLinkContextReady},mutations:{SET_ACCESS_TOKEN(e,t){e.accessToken=t},SET_USER_CONTEXT_READY(e,t){e.userContextReady=t},SET_PUBLIC_LINK_CONTEXT(e,{publicLinkToken:t,publicLinkPassword:n,publicLinkContextReady:i}){e.publicLinkToken=t,e.publicLinkPassword=n,"boolean"==typeof i&&(e.publicLinkContextReady=i)}},actions:{clearUserContext({commit:e}){e("SET_ACCESS_TOKEN",null),e("SET_USER_CONTEXT_READY",!1)},clearPublicLinkContext({commit:e}){e("SET_PUBLIC_LINK_CONTEXT",{publicLinkToken:null,publicLinkPassword:null,publicLinkContextReady:!1})}}},we={LOAD_CONFIG:function(e,t){e.server=t.server.endsWith("/")?t.server:t.server+"/",e.auth=t.auth,e.openIdConnect=t.openIdConnect,e.state=void 0===t.state?"working":t.state,e.applications=void 0===t.applications?[]:t.applications,void 0!==t.options&&(e.options=i._objectSpread2(i._objectSpread2({},e.options),t.options)),t.corrupted&&(e.corrupted=t.corrupted)},LOAD_THEME:function(e,t){e.currentTheme=t},LOAD_THEMES:function(e,t){e.themes=t}},ye={configuration:function(e){return e},previewFileMimeTypes:function(e){var t=e.options.previewFileMimeTypes;return(Array.isArray(t)?t:[]).filter(Boolean).map((function(e){return e.toLowerCase()}))},homeFolder:function(e,n){if(t.isEmpty(e.options.homeFolder))return"/";var i=function(e,n){var i=/{{(.*?)}}/g,a=e.match(i);a&&a.forEach((function(i){var a=/{{substr\s([0-9]+)\s([0-9]+)\s\.(.*)}}/,o=i.match(a);if(!t.isEmpty(o)&&o.length>=4){var r=parseInt(o[1],10),s=parseInt(o[2],10),l=Se(o[3],n);e=e.replace(i,l.substring(r,r+s))}else{var c=/{{\.(.*)}}/,u=i.match(c);!t.isEmpty(u)&&u.length>=2&&(e=e.replace(i,Se(u[1],n)))}}));return e}(e.options.homeFolder,n.user);return i.indexOf("//")>-1?"/":i},theme:function(e){return e.currentTheme}};function Se(e,t){return t[e.toLowerCase()]||""}var Ce={state:{id:"",uuid:"",displayname:"",email:"",capabilities:[],version:{},groups:[],quota:null,language:null,role:null,roles:[]},actions:{resetUserState(e){""!==e.state.id&&this.reset({self:!1,nested:!1,modules:{user:{self:!0}}})}},mutations:{SET_USER(e,n){let i;i=0===Object.keys(n.email).length?"":n.email,e.displayname=n.displayname,e.id=n.id,e.uuid=n.uuid,e.username=n.username,e.email=i,e.groups=n.groups,e.language=n.language,e.role=n.role,t.setUser({username:n.id})},SET_CAPABILITIES(e,t){e.capabilities=t.capabilities,e.version=t.version},SET_QUOTA(e,t){t.free=parseInt(t.free),t.relative=parseFloat(t.relative),t.used=parseInt(t.used),t.total=parseInt(t.total),e.quota=t},SET_ROLES(e,t){e.roles=t}},getters:{getToken:(e,t,n,i)=>i["runtime/auth/accessToken"],capabilities:e=>e.capabilities,quota:e=>e.quota,user:e=>e}},ke={SET_SETTINGS_VALUES:function(e,n){e.settingsValues=null===n?null:t.keyBy(n,"value.id")},SET_SETTINGS_VALUE:function(e,n){e.settingsValues=t.assign({},e.settingsValues,i._defineProperty({},n.value.id,n))}},_e={settingsValuesLoaded:function(e){return null!==e.settingsValues},hasSettingsValue:function(e,t){return function(e){var n=e.settingId,i=e.extension,a=e.bundle,o=e.setting;return null!==t.getSettingsValue({settingId:n,extension:i,bundle:a,setting:o})}},getSettingsValue:function(e,n){return function(i){var a=i.settingId,o=i.extension,r=i.bundle,s=i.setting;if(!n.settingsValuesLoaded)return null;if(a){var l=t.findKey(e.settingsValues,(function(e){return e.value.settingId===a}));return t.isNil(l)?null:e.settingsValues[l].value}var c=t.findKey(e.settingsValues,(function(e){return t.isEqual(e.identifier,{extension:o,bundle:r,setting:s})}));return t.isNil(c)?null:e.settingsValues[c].value}}},Ee=function(){},Ie={CREATE_MODAL:function(e,t){e.displayed=!0,e.variation=t.variation||"passive",e.icon=t.icon,e.title=t.title,e.message=t.message,e.buttonSecondaryText=t.buttonSecondaryText,e.checkboxLabel=t.checkboxLabel||"",e.cancelText=t.cancelText||"Cancel",e.confirmText=t.confirmText||"Confirm",e.confirmDisabled=t.confirmDisabled||!1,e.onCancel=t.onCancel,e.onConfirm=t.onConfirm,e.hasInput=t.hasInput||!1,e.inputValue=t.inputValue||null,e.inputSelectionRange=t.inputSelectionRange,e.inputDescription=t.inputDescription||null,e.inputLabel=t.inputLabel||null,e.inputError=t.inputError||null,e.inputDisabled=t.inputDisabled||!1,e.inputType=t.inputType||"text",e.onInput=t.onInput||Ee,e.onCheckboxValueChanged=t.onCheckboxValueChanged||Ee,e.onConfirmSecondary=t.onConfirmSecondary||Ee,e.contextualHelperLabel=t.contextualHelperLabel,e.contextualHelperData=t.contextualHelperData,e.customContent=t.customContent||""},HIDE_MODAL:function(e){e.displayed=!1},SET_INPUT_ERROR_MESSAGE:function(e,t){e.inputError=t},TOGGLE_MODAL_CONFIRM_BUTTON:function(e){e.confirmDisabled=!e.confirmDisabled}},xe={SET_NAV_ITEMS_FROM_CONFIG:function(e,t){var n=t.extension,i=t.navItems,a=e.staticNavItems;a[n]=i,e.staticNavItems=a},ADD_NAV_ITEM:function(e,t){var n=t.extension,a=t.navItem,o=i._objectSpread2({},e.dynamicNavItems);o[n]=o[n]||[];var r=o[n].findIndex((function(e){return e.route.path===a.route.path}));r>=0?o[n][r]=a:o[n].push(a),e.dynamicNavItems=o},SET_DYNAMIC_NAV_ITEMS:function(e,t){e.dynamicNavItems=t},SET_CLOSED:function(e,t){e.closed=t}},Pe={getNavItemsByExtension:function(e,t){return function(n){var a=e.staticNavItems[n]||[],o=e.dynamicNavItems[n]||[];return[].concat(i._toConsumableArray(a),i._toConsumableArray(o)).filter((function(e){if(!e.enabled)return!0;try{return e.enabled(t.capabilities||{})}catch(t){return console.error("`enabled` callback on navItem "+e.name+" threw an error",t),!1}}))}},getExtensionsWithNavItems:function(e,t){return i._toConsumableArray(new Set([].concat(i._toConsumableArray(Object.keys(e.staticNavItems)),i._toConsumableArray(Object.keys(e.dynamicNavItems))))).filter((function(e){return t.getNavItemsByExtension(e).length>0}))}};var Ae={modules:{app:fe,apps:{state:{fileEditors:[],fileEditorConfigs:{},newFileHandlers:[],fileSideBars:[],customFilesListIndicators:[],meta:{}},actions:{registerApp:function(e,t){(0,e.commit)("REGISTER_APP",t)},addFileAction:function(e,t){(0,e.commit)("ADD_FILE_ACTION",t)}},mutations:ge,getters:ve},user:Ce,config:{state:{state:null,server:"",auth:{clientId:"",apiUrl:"",authUrl:"",metaDataUrl:""},openIdConnect:{authority:""},themes:[],currentTheme:{general:{name:"",slogan:""},logo:{topbar:"",favicon:"",login:"",notFound:""},loginPage:{autoRedirect:!0,backgroundImg:""},designTokens:{colorPalette:{}}},options:{contextHelpers:!0,defaultExtension:"files",topCenterNotifications:!1,disablePreviews:!1,displayResourcesLazy:!0,homeFolder:"",hoverableQuickActions:!1,sidebar:{shares:{showAllOnLoad:!1}},previewFileMimeTypes:[],runningOnEos:!1,cernFeatures:!1,sharingRecipientsPerPage:200}},actions:{loadConfig:function(e,t){var n=e.commit;n("LOAD_CONFIG",t),t.external_apps&&t.external_apps.forEach((function(e){void 0!==e.config&&n("LOAD_EXTENSION_CONFIG",{id:e.id,config:e.config},{root:!0})}))},loadTheme:function(e,t){var n=t.theme;e.commit("LOAD_THEME",n)},loadThemes:function(e,t){var n=t.theme;e.commit("LOAD_THEMES",n)}},mutations:we,getters:ye},settings:{state:{settingsValues:null},actions:{clearSettingsValues:function(e){(0,e.commit)("SET_SETTINGS_VALUES",null)}},mutations:ke,getters:_e},modal:{state:{displayed:!1,variation:"passive",icon:"",title:"",message:"",cancelText:"",confirmText:"",buttonSecondaryText:"",confirmDisabled:!1,hasInput:!1,inputDisabled:!1,inputValue:"",inputSelectionRange:null,inputPlaceholder:"",inputLabel:"",inputError:"",checkboxLabel:"",inputType:"text",onCancel:Ee,onConfirm:Ee,onInput:Ee,onCheckboxValueChanged:Ee,onConfirmSecondary:Ee,contextualHelperLabel:"",contextualHelperData:{},customContent:""},actions:{createModal:function(e,t){(0,e.commit)("CREATE_MODAL",t)},hideModal:function(e){(0,e.commit)("HIDE_MODAL")},setModalInputErrorMessage:function(e,t){(0,e.commit)("SET_INPUT_ERROR_MESSAGE",t)},toggleModalConfirmButton:function(e){(0,e.commit)("TOGGLE_MODAL_CONFIRM_BUTTON")}},mutations:Ie},navigation:{state:{staticNavItems:{},dynamicNavItems:{},closed:!1},mutations:xe,getters:Pe,actions:{openNavigation:function(e){(0,e.commit)("SET_CLOSED",!1)},closeNavigation:function(e){(0,e.commit)("SET_CLOSED",!0)},clearDynamicNavItems:function(e){(0,e.commit)("SET_DYNAMIC_NAV_ITEMS",{})}}},runtime:{namespaced:!0,modules:{auth:be,spaces:{namespaced:!0,state:{spaces:[],spacesInitialized:!1,spacesLoading:!1,spaceMembers:[]},getters:{spaces:e=>e.spaces,spacesInitialized:e=>e.spacesInitialized,spacesLoading:e=>e.spacesLoading,spaceMembers:e=>e.spaceMembers},mutations:{ADD_SPACES(e,t){e.spaces=[...e.spaces,...t]},SET_SPACES_INITIALIZED(e,t){e.spacesInitialized=t},SET_SPACES_LOADING(e,t){e.spacesLoading=t},UPDATE_SPACE_FIELD(e,n){const i=e.spaces,a=e.spaces.findIndex((e=>e.id===n.id));if(a<0)return;const o=i[a],r=t.has(o,n.field),s=t.set(o,n.field,n.value);r||t.Vue.set(i,a,s)},UPSERT_SPACE(e,t){const n=[...e.spaces],i=n.findIndex((e=>e.id===t.id));i>-1?n.splice(i,1,t):n.push(t),e.spaces=n},REMOVE_SPACE(e,t){e.spaces=e.spaces.filter((e=>e.id!==t.id))},CLEAR_SPACES(e){e.spaces=[]},CLEAR_PROJECT_SPACES(e){e.spaces=e.spaces.filter((e=>!m.isProjectSpaceResource(e)))},CLEAR_SPACE_MEMBERS(e){e.spaceMembers=[]},SET_SPACE_MEMBERS(e,t){e.spaceMembers=t},UPSERT_SPACE_MEMBERS(e,n){const i=e.spaceMembers.findIndex((e=>n.id===e.id&&n.collaborator.name===e.collaborator.name));i>=0?t.Vue.set(e.spaceMembers,i,n):e.spaceMembers.push(n)},REMOVE_SPACE_MEMBER(e,t){e.spaceMembers=e.spaceMembers.filter((e=>t.id===e.id&&t.collaborator.name!==e.collaborator.name))}},actions:{async loadSpaces(e,{graphClient:t}){e.commit("SET_SPACES_LOADING",!0);try{const n=await t.drives.listMyDrives();if(!n.data)return;const i=n.data.value.map((e=>m.buildSpace({...e,serverUrl:a.configurationManager.serverUrl})));e.commit("ADD_SPACES",i),e.commit("SET_SPACES_INITIALIZED",!0)}finally{e.commit("SET_SPACES_LOADING",!1)}},async reloadProjectSpaces(e,{graphClient:t}){const n=await t.drives.listMyDrives("name asc","driveType eq project");if(!n.data)return;const i=n.data.value.map((e=>m.buildSpace({...e,serverUrl:a.configurationManager.serverUrl})));e.commit("CLEAR_PROJECT_SPACES"),e.commit("ADD_SPACES",i)},loadSpaceMembers(e,{graphClient:n,space:i}){e.commit("CLEAR_SPACE_MEMBERS");const a=[],o=[];for(const e of Object.keys(i.spaceRoles))for(const r of i.spaceRoles[e])a.push(t.unref(n).users.getUser(r).then((t=>{o.push(g({...t.data,role:e},i.id))})));return Promise.all(a).then((()=>{var t;e.commit("SET_SPACE_MEMBERS",[...(t=o).filter((e=>e.role.name===r.spaceRoleManager.name)).sort(((e,t)=>e.collaborator.displayName.localeCompare(t.collaborator.displayName))),...t.filter((e=>e.role.name!==r.spaceRoleManager.name)).sort(((e,t)=>e.collaborator.displayName.localeCompare(t.collaborator.displayName)))])}))},async addSpaceMember(e,{client:t,graphClient:n,path:i,shareWith:a,permissions:o,role:r,storageId:s,displayName:l}){await t.shares.shareSpaceWithUser(i,a,s,{permissions:o,role:r.name});const c=await n.drives.getDrive(s);e.commit("UPSERT_SPACE",m.buildSpace(c.data));const u={role:r.name,onPremisesSamAccountName:a,displayName:l};e.commit("UPSERT_SPACE_MEMBERS",g(u,s))},async changeSpaceMember(e,{client:t,graphClient:n,share:i,permissions:a,role:o}){await t.shares.shareSpaceWithUser("",i.collaborator.name,i.id,{permissions:a,role:o.name});const r=await n.drives.getDrive(i.id);e.commit("UPSERT_SPACE",m.buildSpace(r.data));const s=g({role:o.name,onPremisesSamAccountName:i.collaborator.name,displayName:i.collaborator.displayName},i.id);e.commit("UPSERT_SPACE_MEMBERS",s)},async deleteSpaceMember(e,{client:t,graphClient:n,share:i,reloadSpace:a=!0}){const o={shareWith:i.collaborator.name};if(await t.shares.deleteShare(i.id,o),a){const t=await n.drives.getDrive(i.id);e.commit("UPSERT_SPACE",m.buildSpace(t.data))}e.commit("REMOVE_SPACE_MEMBER",i)}}}}}},strict:!1},Te={cs:{Account:"Účet","Account Information":"Informace o účtu","All files":"Všechny soubory","An error occurred while loading the public link":"Při načítání veřejného odkazu došlo k chybě","An error occurred while resolving the private link":"Při načítání odkazu nastala chyba","Application Switcher":"Přepínač Aplikací","Authentication failed":"Ověření selhalo",Cancel:"Zrušit",Confirm:"Potvrdit",Continue:"Pokračovat",documentation:"dokumentace","Download failed":"Stahování selhalo",Edit:"Upravit","File could not be located":"Soubor se nepodařilo najít","For help visit our":"Pro pomoc navštivte naše","Loading public link…":"Načítání veřejného odkazu...","Log out":"Odhlásit",Login:"Přihlásit",Logout:"Odhlásit se","No email has been set up":"Žádná emailová adresa nebyla nastavena",Notifications:"Oznámení","Please click the button below to authenticate and get access to your data.":"Stiskněte prosím tlačítko dole pro udělení oprávnění a zpřístupněte tak svá data.","Please contact the administrator if this error persists.":"Pokud tato chyba přetrvává, kontaktujte administrátora.","Public link":"Veřejný odkaz","Resolving private link…":"Načítání soukromého odkazu...","Upload complete":"Nahrávání dokončeno","Upload failed":"Nahrávání selhalo","Welcome to %{productName}":"Vítejte v %{productName}","You are not part of any group":"Nejste členem žádné skupiny"},de:{"{{ app.title }}":"{{ app.title }}","%{ errors } of %{ uploads } item failed":["%{ errors } von %{ uploads } Datei fehlgeschlagen","%{ errors } von %{ uploads } Dateien fehlgeschlagen"],"%{ filesInProgressCount } item uploading...":["%{ filesInProgressCount } Datei wird hochgeladen...","%{ filesInProgressCount } Dateien werden hochgeladen..."],"%{ roundedRemainingHours } hour left":["%{ roundedRemainingHours } Stunde verbleibend","%{ roundedRemainingHours } Stunden verbleibend"],"%{ roundedRemainingMinutes } minute left":["%{ roundedRemainingMinutes } Minute verbleibend","%{ roundedRemainingMinutes } Minuten verbleibend"],"%{ successfulUploads } item uploaded":["%{ successfulUploads } Datei hochgeladen","%{ successfulUploads } Dateien hochgeladen"],"%{used} of %{total} used":"%{used} von %{total} benutzt","%{used} used":"%{used} verwendet","Access denied":"Zugriff verweigert",Account:"Konto","Account Information":"Kontoinformationen","Account menu":"Benutzer-Menü",Activities:"Aktivitäten","Add or edit tags":"Hinzufügen oder Bearbeiten von Schlagwörtern","All files":"Alle Dateien","All files and folders":"Alle Dateien","Also, make sure to check the browser console for more information.":"Bitte prüfen Sie auch die Browser-Konsole für weitere Informationen.","An error occurred while loading the public link":"Beim Laden des öffentlichen Links ist ein Fehler aufgetreten","An error occurred while resolving the private link":"Beim Auflösen des privaten Links ist ein Fehler aufgetreten.","Application Switcher":"Apps-Menü","Authentication failed":"Authentifizierung fehlgeschlagen","Calculating estimated time...":"Berechnung der voraussichtlichen Dauer...",Cancel:"Abbrechen","Cancel upload":"Hochladen abbrechen","Change password":"Passwort ändern","Change Password":"Passwort ändern",chat:"chat","Click to switch theme":"Klicken, um das Farbschema zu wechseln",Close:"Schließen",Confirm:"Bestätigen",Continue:"Weiter","Current password":"Aktuelles Passwort","Currently used theme":"Aktuell verwendetes Farbschema","Display name":"Anzeigename",documentation:"Dokumentation","Download failed":"Fehler beim Herunterladen",Edit:"Bearbeiten",Email:"E-Mail","Enter password for public link":"Passworteingabe für öffentlichen Link","Failed to change password":"Fehler beim Ändern des Passworts","Few seconds left":"Noch wenige Sekunden","File could not be located":"Datei konnte nicht gefunden werden","For help visit our":"Für Hilfe besuche unsere","Group memberships":"Gruppenzugehörigkeiten","Hide details":"Details ausblenden","Incorrect password":"Falsches Kennwort","Internet Explorer (your current browser) is not officially supported. For security reasons, please switch to another browser.":"Internet Explorer (der aktuell verwendeter Browser) wird offiziell nicht unterstützt. Bitte verwende aus Sicherheitsgründen einen anderen Browser.",Loading:"Lade ...","Loading public link…":"Lade öffentlichen Link…","Log in again":"Erneut anmelden","Log out":"Abmelden","Logged out":"Abgemeldet","Logging you in":"Sie werden eingeloggt",Login:"Login",Logout:"Abmelden","Logout in progress":"Abmeldung wird durchgeführt","Main navigation":"Hauptnavigation","Missing or invalid config":"Fehlende oder falsche Konfiguration","Navigate to %{ pageName } page":"Zur %{ pageName } Seite navigieren","Navigate to personal files page":"Zur persönlichen Ablage navigieren","Navigated to %{ pageTitle }":"Zur Seite %{ pageTitle } navigiert","New password":"Neues Passwort","No activities":"Keine Aktivitäten","No email has been set up":"Es wurde noch keine E-Mail eingerichtet","Note: You can reload this page after you accept the share.":"Hinweis: Sie können diese Seite neuladen, nachdem Sie das Teilen akzepiert haben.",Notifications:"Benachrichtigungen","Oidc callback":"OIDC Callback","Oidc redirect":"OIDC Weiterleitung",'Open "Shared with me"':'Öffne "Mit mir geteilt"',"or join our":"oder machen Sie mit bei ","ownCloud feedback survey":"ownCloud Feedbackumfrage","Password and password confirmation must be identical":"Passwort und Passwort-Bestätigung müssen identisch sein","Password was changed successfully":"Passwort wurde erfolgreich geändert","Pause upload":"Hochladen anhalten",Personal:"Persönlich","Personal storage":"Persönlicher Speicherplatz","Personal storage (%{percentage}% used)":"Persönlicher Speicher (%{percentage}% benutzt)","Please check if the file config.json exists and is correct.":"Bitte prüfen Sie ob die config.json Konfigurationsdatei existiert und valide ist.","Please click the button below to authenticate and get access to your data.":"Klicken Sie auf die Schaltfläche unten, um sich zu authentifizieren und auf Ihre Daten zuzugreifen.","Please contact the administrator if this error persists.":"Bitte kontaktieren Sie den Administrator, wenn dieser Fehler weiterhin besteht.","Please wait while you're being logged out.":"Bitte warten, Sie werden ausgeloggt.","Please wait, you are being redirected.":"Bitte warten, Sie werden weitergeleitet","Preparing upload...":"Hochladen wird vorbereitet...","Private link":"Privater Link","Provide your feedback: We'd like to improve the web design and would be happy to hear your feedback. Thank you! Your ownCloud team.":"Gib uns Feedback: Wir würden unser Webdesign gerne verbessern und freuen uns über deine Rückmeldung. Vielen Dank! Dein ownCloud Team.","Public files":"Öffentliche Dateien","Public link":"Öffentlicher Link","Quota exceeded":"Quota überschritten","Repeat new password":"Neues Passwort wiederholen","Resolving private link…":"Auflösen des privaten Links…","Resume upload":"Hochladen fortsetzen","Retry all failed uploads":"Alle fehlgeschlagenen Downloads erneut starten","Scan for viruses":"Auf Viren prüfen","Show details":"Details anzeigen","Sidebar navigation menu":"Navigation in der Seitenleiste","Skip to main":"Zum Hauptinhalt springen",'This file has been shared with you via "%{parentShareName}". Accept the share "%{parentShareName}" in "Shares" > "Shared with me" to view it.':'Diese Datei wurde mit Ihnen über "%{parentShareName}" geteilt. Akzeptieren Sie die Teilung "%{parentShareName}" in "Geteilt" > "Mit mir geteilt" um sie anzuschauen.','This file has been shared with you. Accept it in "Shares" > "Shared with me" to view it.':'Diese Datei wurde mit Ihnen geteilt. Akzeptieren Sie es in "Geteilt" > "Mit mir geteilt" um sie anzuschauen.',"This file is currently being processed and is not yet available for use. Please try again shortly.":"Diese Datei wird derzeit bearbeitet und kann noch nicht verwendet werden. Bitte in Kürze erneut versuchen.",'This folder has been shared with you via "%{parentShareName}". Accept the share "%{parentShareName}" in "Shares" > "Shared with me" to view it.':'Dieser Ordner wurde mit Ihnen über "%{parentShareName}" geteilt. Akzeptieren Sie die Teilung "%{parentShareName}" in "Geteilt" > "Mit mir geteilt" um sie anzuschauen.','This folder has been shared with you. Accept it in "Shares" > "Shared with me" to view it.':'Dieser Ordner wurde mit Ihnen geteilt. Akzeptieren Sie es in "Geteilt" > "Mit mir geteilt" um ihn anzuschauen.',"This resource is password-protected":"Diese Datei ist passwortgeschützt","Toggle sidebar":"Seitenleiste ein-/ausklappen","Top bar":"Kopfleiste","Unknown error":"Unbekannter Fehler","Upload cancelled":"Hochladen abgebrochen","Upload complete":"Hochladen abgeschlossen","Upload failed":"Hochladen fehlgeschlagen","User ID":"Nutzer ID","User Menu":"Benutzermenü",Username:"Nutzername",'Virus "%{description}" detected. Please contact your administrator for more information.':'Virus "%{description}" entdeckt. Bitte kontaktieren Sie Ihren Administrator für weitere Informationen.',"Welcome to %{productName}":"Willkommen zu %{productName}","You are not part of any group":"Sie gehören keiner Gruppe an.","You were automatically logged out for security reasons.":"Sie wurden aus Sicherheitsgründen automatisch abgemeldet."},es:{"{{ app.title }}":"{{ app.title }}","%{used} of %{total} used":"usados %{used} de %{total} ","Access denied":"Acceso denegado",Account:"Cuenta","Account Information":"Información de cuenta","Account menu":"Menú de la cuenta","All files":"Todos los archivos","Also, make sure to check the browser console for more information.":"También, asegúrese de revisar la consola del navegador para más información. ","An error occurred while loading the public link":"Se ha producido un error al cargar el enlace público","An error occurred while resolving the private link":"Un error ocurrió resolviendo el enlace privado ","Application Switcher":"Cambio de aplicación","Authentication failed":"Fallo de autenticación",Cancel:"Cancelar",chat:"chat","Click to switch theme":"Haga click aquí para cambiar tema",Close:"Cerrar",Continue:"Continuar","Currently used theme":"Tema en uso actualmente","Display name":"Nombre a mostrar",documentation:"documentación","Download failed":"Descarga fallida",Edit:"Editar",Email:"Correo electrónico","File could not be located":"No se ha podido encontrar el archivo","For help visit our":"Para ayuda visite nuestra","Group memberships":"Membresía de grupo","Internet Explorer (your current browser) is not officially supported. For security reasons, please switch to another browser.":"Internet Explorer (su navegador actual) no esta soportado oficialmente. Por razones de seguridad, por favor cambie a otro navegador.",Loading:"Cargando","Loading public link…":"Cargando enlace público...","Log out":"Salir","Logging you in":"Accediendo",Login:"Iniciar sesión",Logout:"Cerrar sesión","Main navigation":"Navegación principal","Missing or invalid config":"Configuración faltante o inválida","No email has been set up":"No se ha establecido ningún correo electrónico",Notifications:"Notificaciones","ownCloud feedback survey":"encuesta de ownCloud","Personal storage (%{percentage}% used)":"Almacenamiento personal (%{percentage}% usado)","Please check if the file config.json exists and is correct.":"Por favor revise que el archivo config.json existe y es correcto.","Please click the button below to authenticate and get access to your data.":"Pulse el botón para autenticarse y ganar acceso a sus datos.","Please contact the administrator if this error persists.":"Contacta con el administrador si el error persiste","Please wait, you are being redirected.":"Por favor espere. Lo estamos redireccionando.","Private link":"Enlace privado","Provide your feedback: We'd like to improve the web design and would be happy to hear your feedback. Thank you! Your ownCloud team.":"Denos su opinión. Queremos mejorar el diseño web y estaríamos felices de escuchar su opinión. ¡Gracias! Tu equipo de ownCloud.","Public link":"Enlace público","Resolving private link…":"Resolviendo enlace privado...","Sidebar navigation menu":"Menu lateral de navegación","Skip to main":"Volver al inicio","Toggle sidebar":"Cambiar barra lateral","Top bar":"Barra superior","Upload complete":"Subida completa","Upload failed":"Subida fallida","User ID":"ID del usuario","User Menu":"Menú del usuario",Username:"Usuario","Welcome to %{productName}":"Bienvenido a %{productName} ","You are not part of any group":"No eres parte de ningún grupo"},fr:{"{{ app.title }}":"{{ app.title }}","%{ errors } of %{ uploads } item failed":["%{ errors } élément sur %{ uploads } échoué","%{ errors } éléments sur %{ uploads } échoués","%{ errors } éléments sur %{ uploads } échoués"],"%{ filesInProgressCount } item uploading...":["Envoi de %{ filesInProgressCount } élément…","Envoi de %{ filesInProgressCount } élément…","Envoi de %{ filesInProgressCount } éléments…"],"%{ roundedRemainingHours } hour left":["%{ roundedRemainingHours } heure restante","%{ roundedRemainingHours } heure restante","%{ roundedRemainingHours } heures restantes"],"%{ roundedRemainingMinutes } minute left":["%{ roundedRemainingMinutes } minute restante","%{ roundedRemainingMinutes } minutes restantes","%{ roundedRemainingMinutes } minutes restantes"],"%{ successfulUploads } item uploaded":["%{ successfulUploads } élément envoyé","%{ successfulUploads } éléments envoyés","%{ successfulUploads } éléments envoyés"],"%{used} of %{total} used":"%{used} sur %{total} utilisé","%{used} used":"%{used} utilisé","Access denied":"Accès refusé",Account:"Compte","Account Information":"Informations de compte","Account menu":"Menu du compte",Activities:"Activités","All files":"Tous les fichiers","All files and folders":"Tous les fichiers et dossiers","Also, make sure to check the browser console for more information.":"Aussi, vérifiez la console de votre navigateur pour plus d'informations.","An error occurred while loading the public link":"Une erreur est apparue lors du chargement du lien public","An error occurred while resolving the private link":"Une erreur est apparue lors de la résolution du lien privé","Application Switcher":" Changeur d'applications","Authentication failed":"Error d'authentification","Calculating estimated time...":"Calcul du temps nécessaire…",Cancel:"Annuler","Cancel upload":"Annuler l'envoi","Change password":"Modifier le mot de passe","Change Password":"Modifier le mot de passe",chat:"chat","Click to switch theme":"Cliquez pour changer de thème",Close:"Fermer",Confirm:"Confirmer",Continue:"Continuer","Current password":"Mot de passe actuel","Currently used theme":"Thème utilisé actuellement","Display name":"Afficher le nom",documentation:"documentation","Download failed":"Echec de téléchargement",Edit:"Editer",Email:"Email","Enter password for public link":"Entrer le mot de passe du lien public","Failed to change password":"Échec de la modification du mot de passe","Few seconds left":"Plus que quelques secondes","File could not be located":"Le fichier n'a pas été trouvé","For help visit our":"Pour de l'aide visiter notre ","Group memberships":"Membres du groupe","Hide details":"Masquer les détails","Incorrect password":"Mot de passe incorrect","Internet Explorer (your current browser) is not officially supported. For security reasons, please switch to another browser.":"Internet Explorer (votre navigateur actuel) n'est plus officiellement supporté. Pour des raisons de sécurité, utilisez un autre navigateur.",Loading:"Chargement","Loading public link…":"Chargement du lien public...","Log out":"Se déconnecter","Logged out":"Déconnecté","Logging you in":"En cours d'identification",Login:"Se connecter","Main navigation":"Navigation principale","Missing or invalid config":"Configuration manqante ou incorrecte","Navigate to %{ pageName } page":"Aller vers la page %{ pageName }","Navigate to personal files page":"Aller vers la page des fichiers personnels","Navigated to %{ pageTitle }":"Aller vers %{ pageTitle }","New password":"Nouveau mot de passe","No activities":"Pas d'activités","No email has been set up":"Pas d'adresse e-mail configurée",Notifications:"Notifications","Oidc callback":"Rappel Oidc","Oidc redirect":"Redirection Oidc","or join our":"ou rejoigner notre","ownCloud feedback survey":"Enquête d'opinion sur ownCloud","Password and password confirmation must be identical":"Le mot de passe et la confirmation doivent être identiques","Password was changed successfully":"Le mot de passe a bien été modifié","Pause upload":"Mettre en pause l'envoi",Personal:"Personnel","Personal storage":"Stockage personnel","Personal storage (%{percentage}% used)":"Stockage personnel (%{percentage}% utilisé)","Please check if the file config.json exists and is correct.":"S'il vous plait, vérifiez que le fichier config.json existe et qu'il est correcte","Please click the button below to authenticate and get access to your data.":"Veuillez cliquer le button ci-dessous pour vous authentifier et obtenir accès à vos données.","Please contact the administrator if this error persists.":"Veuillez contacter l'administrateur si cette erreur persiste.","Please wait while you're being logged out.":"Merci de patienter pendant que vous êtes déconnecté.","Please wait, you are being redirected.":"Veuillez patienter, vous allez être redirigé.","Preparing upload...":"Préparation de l'envoi…","Private link":"Lien privé","Provide your feedback: We'd like to improve the web design and would be happy to hear your feedback. Thank you! Your ownCloud team.":"Donner votre retour : nous aimerions améliorer le design du site web et nous serions heureux d'avoir votre retour. Merci ! Votre équipe ownCloud.","Public files":"Fichiers publics","Public link":"Lien public","Repeat new password":"Saisissez à nouveau le nouveau mot de passe","Resolving private link…":"Résolution du lien privé...","Resume upload":"Reprendre l'envoi","Retry all failed uploads":"Réessayer tous les envois échoués","Show details":"Afficher les détails","Sidebar navigation menu":"manu de navigation du panneau latéral","Skip to main":"Passer le principal","This resource is password-protected":"Cette ressource est protégée par mot de passe","Toggle sidebar":"Basculer l'affichage de la barre latérale","Top bar":"Barre supérieure","Unknown error":"Erreur inconnue","Upload cancelled":"Envoi annulé","Upload complete":"Upload terminé","Upload failed":"Upload a échoué","User ID":"ID utilisateur","User Menu":"Menu utilisateur",Username:"Nom d'utilisateur",'Virus "%{description}" detected. Please contact your administrator for more information.':'Virus "%{description}" détecté. Veuillez contacter votre administrateur pour plus d\'informations.',"Welcome to %{productName}":"Bienvenue sur %{productName}","You are not part of any group":"Vous n'êtes membre d'aucun groupe"},gl:{Account:"Conta","Account Information":"Información da conta","All files":"Todos os ficheiros","An error occurred while loading the public link":"Produciuse un erro ao cargar a ligazón pública","An error occurred while resolving the private link":"Produciuse un erro ao resolver a ligazón privada","Application Switcher":"Cambiador de aplicacións","Authentication failed":"Produciuse un fallo de autenticación",Cancel:"Cancelar",Confirm:"Confirmar",Continue:"Continuar",documentation:"documentación","Download failed":"Produciuse un fallo na descarga",Edit:"Editar","Enter password for public link":"Introduza o contrasinal para a ligazón pública","File could not be located":"Non foi posíbel localizar o ficheiro","For help visit our":"Para obter axuda visite o noso","Incorrect password":"Contrasinal incorrecta",Loading:"Cargando","Loading public link…":"Cargando a ligazón pública…","Log out":"Saír",Login:"Acceso",Logout:"Saír","No email has been set up":"Non se configurou ningún correo-e",Notifications:"Notificacións","Please click the button below to authenticate and get access to your data.":"Prema no botón de embaixo para autenticarse e obter acceso aos seus datos.","Please contact the administrator if this error persists.":"Póñase en contacto co seu administrador se persiste o erro.","Public link":"Ligazón pública","Resolving private link…":"Resolvendo a ligazón privada…","Upload complete":"Envío completado","Upload failed":"Produciuse un fallo no envío","Welcome to %{productName}":"Benvido a %{productName}","You are not part of any group":"Vostede non forma parte de ningún grupo"},it:{"Access denied":"Accesso negato",Account:"Utente","Account Information":"Informazioni utente","Account menu":"Menu utente","Authentication failed":"Autenticazione fallita",chat:"chat","Click to switch theme":"Clicca per cambiare tema","Currently used theme":"Tema in uso","Display name":"Mostra nome",documentation:"documentazione","Download failed":"Download fallito",Edit:"Modifica",Email:"Email","File could not be located":"File non trovato","For help visit our":"Per aiuto visita","Internet Explorer (your current browser) is not officially supported. For security reasons, please switch to another browser.":"Internet Explorer (il suo browser corrente) non è ufficialmente supportato. Per ragioni di sicurezza si prega di cambiare browser.",Loading:"Caricamento","Log out":"Esci",Login:"Login","Main navigation":"Navigazione principale","Missing or invalid config":"Configurazione mancante o invalida","Navigate to %{ pageName } page":"Vai a pagina %{ pageName }","No email has been set up":"Non è stata impostata nessuna email",Notifications:"Notifiche","or join our":"o unisciti a","ownCloud feedback survey":"Sondaggio ownCloud","Personal storage (%{percentage}% used)":"Spazio personale (utilizzato al %{percentage}%)","Please check if the file config.json exists and is correct.":"Controlla se il file config.json esiste ed è corretto","Please click the button below to authenticate and get access to your data.":"Clicca il pulsante sotto per autenticarti e accedere ai tuoi dati","Please contact the administrator if this error persists.":"Contatta l'amministratore se l'errore persiste","Please wait, you are being redirected.":"Reindirizzamento in corso, attendere prego.","Private link":"Link privato","Public link":"Link pubblico","User ID":"ID utente","User Menu":"Menu utente",Username:"Nome utente","You are not part of any group":"Non sei parte di alcun gruppo"}},Re={cs:{Contributor:"Přispěvatel",Create:"Vytvořit",Delete:"Odstranit","Download and preview":"Stáhnout a zobrazit",Edit:"Upravit","Edit, download and preview":"Upravit, stáhnout a zobrazit",Editor:"Editor",Group:"Skupina","Recipients can view and download contents.":"Příjemci mohou prohlížet a stahovat obsah.","Recipients can view, download and upload contents.":"Příjemci mohou prohlížet, stahovat a nahrávat obsah.","Recipients can view, download, edit, delete and upload contents.":"Příjemci mohou prohlížet, stahovat, upravovat, mazat a nahrávat obsah.","Set detailed permissions":"Nastavit podrobná oprávnění",Share:"Sdílet","Upload, edit, delete, download and preview":"Nahrát, upravit, smazat, stáhnout a zobrazit",Uploader:"Nahrál",User:"Uživatel",Viewer:"Divák"},de:{contributor:"Bearbeiter",Contributor:"Bearbeiter",Create:"Erstellen","custom permissions":"benutzerdefinierte Rechte","Custom permissions":"Benutzerdefinierte Rechte",Delete:"Löschen",Deny:"Ablehnen","Deny access":"Verweigere Zugriff","Download and preview":"Herunterladen und Vorschau","Download, preview and share":"Herunterladen, Vorschau und Teilen",Edit:"Bearbeiten","Edit, download and preview":"Bearbeiten, Herunterladen und Vorschau","Edit, download, preview and share":"Bearbeiten, Herunterladen, Vorschau und Teilen",editor:"Editor",Editor:"Bearbeiter",Federated:"Föderiert",Group:"Gruppe",Guest:"Gast",internal:"intern",Internal:"Intern",Link:"Link",manager:"Manager",Manager:"Manager","no access":"Verweigere Zugriff","No access":"Verweigere Zugriff","People need to be invited and login is required":"Personen müssen eingeladen werden und eine Anmeldung ist erforderlich",Read:"Lesen","Recipients can upload but existing contents are not revealed.":"Empfänger können hochladen, aber existierende Inhalte werden nicht angezeigt.","Recipients can view and download contents.":"Empfänger können Inhalte sehen und herunterladen.","Recipients can view, download and edit contents.":"Empfänger können Inhalte einsehen, herunterladen und bearbeiten","Recipients can view, download and upload contents.":"Empfänger können Inhalte sehen, herunterladen und hochladen.","Recipients can view, download, edit, delete and upload contents.":"Empfänger können Inhalte sehen, herunterladen, hochladen, editieren und löschen.","Set detailed permissions":"Detaillierte Rechte festlegen",Share:"Teilen","Upload, edit, delete, download and preview":"Hochladen, Bearbeiten, Löschen, Herunterladen und Vorschau","Upload, edit, delete, download, preview and share":"Hochladen, Bearbeiten, Löschen, Herunterladen, Vorschau und Teilen",uploader:"Uploader",Uploader:"Hochgeladen von",User:"Benutzer",viewer:"Betrachter",Viewer:"Betrachter"},es:{contributor:"contribuidor",Contributor:"Colaborador",Create:"Crear","custom permissions":"permisos personalizados","Custom permissions":"Permisos personalizados",Delete:"Eliminar",Deny:" negar","Deny access":"Acceso denegado","Download and preview":"Descargar y previsualizar","Download, preview and share":"Descargar, previsualizar y compartir",Edit:"Editar","Edit, download and preview":"Editar, descargar y previsualizar","Edit, download, preview and share":"Edita, descarga, previsualiza y comparte",editor:"editor",Editor:"Editor",Federated:"federado",Group:"Grupo",Guest:"Invitado",internal:"interno",Internal:"integro",Link:"Enlace",manager:"gerente",Manager:"gerente","no access":"Sin acceso","No access":"Sin acceso","People need to be invited and login is required":"Las personas deben ser invitadas y se requiere iniciar sesión\n ",Read:"leer","Recipients can upload but existing contents are not revealed.":"Los receptores pueden subir archivos pero el contenido existente no será revelado.","Recipients can view and download contents.":"Los destinatarios pueden ver y descargar contenidos.","Recipients can view, download and edit contents.":"Los destinatarios pueden ver, descargar y editar contenidos.","Recipients can view, download and upload contents.":"Los destinatarios pueden ver, descargar y cargar contenidos.","Recipients can view, download, edit, delete and upload contents.":"Los destinatarios pueden ver, descargar, editar, borrar y cargar contenidos.","Set detailed permissions":"Definir permisos detallados",Share:"cuota","Upload, edit, delete, download and preview":"Subir, editar, eliminar, descargar y previsualizar","Upload, edit, delete, download, preview and share":"Sube, edita, elimina, descarga, previsualiza y comparte\n ",uploader:"cargador",Uploader:"Cargador",User:"Usuario",viewer:"espectador",Viewer:"Visor"},fr:{contributor:"contributeur",Contributor:"Contributeur",Create:"Créer","custom permissions":"permissions personnalisées",Delete:"Supprimer","Download and preview":"Téléchargé et visualiser","Download, preview and share":"Téléchargé, visualiser et partager",Edit:"Editer","Edit, download and preview":"Modifier, télécharger et visualiser","Edit, download, preview and share":"Modifier, téléchargé, visualiser et partager",editor:"Éditeur",Editor:"Éditeur",Federated:"Fédéré",Group:"Groupe",Guest:" Invité",Link:"Lien",Read:"Lire","Recipients can upload but existing contents are not revealed.":"Destinataires peuvent uploader mais le contenu existant n'est pas visible.","Recipients can view and download contents.":"Destinataires peuvent lister et télécharger le contenu.","Recipients can view, download and upload contents.":"Destinataires peuvent lister, télécharger et uploader du contenu.","Recipients can view, download, edit, delete and upload contents.":"Destinataires peuvent lister, télécharger, modifier, supprimer et uploader du contenu.","Set detailed permissions":"Définir des permissions détaillées",Share:"Partager","Upload, edit, delete, download and preview":"Uploader, modifier, supprimer, télécharger et visualiser","Upload, edit, delete, download, preview and share":"Uploader, modifier, supprimer, télécharger, visualiser et partager",Uploader:"Uploadeur",User:"Utilisateur",viewer:"Visionneuse",Viewer:"Visionneur"},gl:{Contributor:"Colaborador",Create:"Crear",Delete:"Eliminar","Download and preview":"Descargar e visionar","Download, preview and share":"Descargar e visionar e compartir",Edit:"Editar","Edit, download and preview":"Editar, descargar e visionar","Edit, download, preview and share":"Editar, descargar e visionar e compartir",Editor:"Editor",Group:"Grupo",Guest:"Convidado","Recipients can upload but existing contents are not revealed.":"Os destinatarios poden enviar, mais non se revelan os contidos existentes.","Recipients can view and download contents.":"Os destinatarios poden ver e descargar contidos.","Recipients can view, download and upload contents.":"Os destinatarios poden ver, descargar e enviar contidos.","Recipients can view, download, edit, delete and upload contents.":"Os destinatarios poden ver, descargar, editar, eliminar e enviar contidos.","Set detailed permissions":"Estabelecer os permisos detallados",Share:"Compartir","Upload, edit, delete, download and preview":"Enviar, editar, eliminar, descargar e visionar","Upload, edit, delete, download, preview and share":"Enviar, editar, eliminar, descargar visionar e compartir",Uploader:"Xestor de envíos",User:"Usuario",Viewer:"Visor"},it:{Edit:"Modifica"}},Le={cs:{Save:"Uložit"},de:{"Back to %{panel} panel":"Zurück zum %{panel} Panel","Changes saved":"Änderungen gespeichert",Close:"Schließen","Close file sidebar":"Seitenleiste schließen","Max quota limit of %{ limit } GB exceeded":"Speicherplatz-Begrenzung von %{ limit } GB überschritten","No changes":"Keine Änderungen","No restriction":"Unbegrenzt","Please enter only numbers":"Bitte nur Zahlen eingeben",Revert:"Zurücknehmen",Save:"Speichern","Select a quota option or enter your own value":"Wählen Sie eine der Optionen oder geben Sie einen eigenen Wert ein.","Unsaved changes":"Ungespeicherte Änderungen"},es:{Close:"Cerrar",Save:"Guardar"},fr:{Close:"Fermer","Close file sidebar":"Ouvrir le panneau latéral de fichier.","No changes":"Aucune modification","No restriction":"Aucune restriction","Please enter only numbers":"Merci de ne saisir que des chiffres",Revert:"Rétablir",Save:"Enregistrer","Unsaved changes":"Modifications non enregistrées"},gl:{Save:"Gardar"},it:{}},Ne=t.OdsTranslations,De={install:function(e){e.mixin({computed:i._objectSpread2(i._objectSpread2({},t.mapGetters(["capabilities"])),{},{isUrlSigningEnabled:function(){return this.capabilities.core&&this.capabilities.core["support-url-signing"]}}),methods:i._objectSpread2(i._objectSpread2({},t.mapActions(["showMessage"])),{},{downloadFile:function(e){var n=arguments,a=this;return i._asyncToGenerator(i._regeneratorRuntime().mark((function o(){var r,s,l,c,u,d,p;return i._regeneratorRuntime().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r=n.length>1&&void 0!==n[1]?n[1]:null,s=a.$store.getters["runtime/auth/isPublicLinkContextReady"],l=a.$store.getters["runtime/auth/isUserContextReady"],c=null,u={"X-Request-ID":t.v4()},s?c=e.downloadURL:(c=null===r?"".concat(a.$client.helpers._davPath).concat(e.webDavPath):a.$client.fileVersions.getFileVersionUrl(e.fileId,r),d=a.$store.getters["runtime/auth/accessToken"],u={Authorization:"Bearer "+d}),!l||!a.isUrlSigningEnabled){i.next=24;break}return i.prev=7,i.next=10,fetch(c,{method:"HEAD",headers:u});case 10:if(200!==i.sent.status){i.next=17;break}return i.next=14,a.$client.signUrl(c);case 14:return p=i.sent,a.triggerDownload(p,e.name),i.abrupt("return");case 17:i.next=22;break;case 19:i.prev=19,i.t0=i.catch(7),console.error(i.t0);case 22:return a.showMessage({title:a.$gettext("Download failed"),desc:a.$gettext("File could not be located"),status:"danger",autoClose:{enabled:!0}}),i.abrupt("return");case 24:a.triggerDownload(c,e.name);case 25:case"end":return i.stop()}}),o,null,[[7,19]])})))()},encodePath:o.encodePath,triggerDownload:function(e,t){var n=document.createElement("a");n.style.display="none",document.body.appendChild(n),n.href=e,n.setAttribute("download",t),n.click(),document.body.removeChild(n)}})})}};const Fe={name:"Avatar",props:{type:{type:String,default:"div",validator:function(e){return e.match(/(div|span)/)}},userName:{type:String,default:""},userid:{type:String,default:""},width:{type:Number,required:!1,default:42}},data:function(){return{avatarSource:"",loading:!0}},computed:i._objectSpread2({},t.mapGetters(["capabilities","configuration"])),watch:{userid:function(e){this.setUser(e)}},mounted:function(){""!==this.userid?this.setUser(this.userid):this.loading=!1},methods:{setUser:function(e){var n=this;if(this.loading=!0,this.avatarSource="",this.capabilities.files_sharing.user.profile_picture&&""!==e){var i=this.$store.getters["runtime/auth/accessToken"],a=new Headers,o=(this.configuration.server||window.location.origin)+"remote.php/dav/avatars/"+e+"/128.png";a.append("Authorization","Bearer "+i),a.append("X-Requested-With","XMLHttpRequest"),a.append("X-Request-ID",t.v4()),fetch(o,{headers:a}).then((function(e){if(e.ok)return e.blob();if(404!==e.status)throw new Error("Unexpected status code ".concat(e.status))})).then((function(e){n.loading=!1,n.avatarSource=e?window.URL.createObjectURL(e):""})).catch((function(t){n.avatarSource="",n.loading=!1,console.error('Error loading avatar image for user "'.concat(e,'": '),t.message)}))}else this.loading=!1}}};var Ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.type,{tag:"component",attrs:{"aria-hidden":!0}},[e.loading?n("oc-spinner",{key:"avatar-loading",style:"width: "+e.width+"px; height: "+e.width+"px;"}):n("oc-avatar",{key:"avatar-loaded",attrs:{width:e.width,src:e.avatarSource,"user-name":e.userName}})],1)};Ue._withStripped=!0;const Me=t.normalizeComponent({render:Ue,staticRenderFns:[]},undefined,Fe,undefined,false,undefined,!1,void 0,void 0,void 0);var $e=[],Oe="forward",ze="backward",Be={methods:{focus:function(e){var t=e.from,n=e.to,i=e.revert?ze:Oe;t&&i===Oe?$e.splice(0,$e.length):t=document.activeElement,i===Oe&&$e.push(t),i===ze&&(n=$e.pop()),n instanceof Element&&n.focus()}}};t.Vue.use(t.Plugin),t.Vue.use(t.index),t.Vue.use(t.VueRouter$1),t.Vue.use(t._default$1),t.Vue.use(t.vueScrollto),t.Vue.use(De),t.Vue.use(t.plugin),t.Vue.use(t.index$1,{refreshOnceOnNavigation:!0}),t.Vue.use(t._default$2),t.Vue.use(t.AsyncComputed),t.Vue.component("AvatarImage",Me),t.Vue.mixin(Be),t.Vue.mixin({mounted:function(){var e=this;this.$nextTick((function(){return e.$emit("mounted",e,"mounted")}))},beforeDestroy:function(){this.$emit("beforeDestroy",this,"beforeDestroy")},updated:function(){var e=this;this.$nextTick((function(){return e.$emit("updated",e,"updated")}))}}),window.Vue=t.Vue;const je=t.lib$1.createStore(t.index.Store,{...Ae}),Ve={success:de,failure:he},qe=t.merge({},Te,Re,Le,Ne),Ge={en:"English",de:"Deutsch",es:"Español",cs:"Czech",fr:"Français",it:"Italiano",gl:"Galego"};function He(e){return We.apply(this,arguments)}function We(){return(We=i._asyncToGenerator(i._regeneratorRuntime().mark((function e(n){return i._regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n,{headers:{"X-Request-ID":t.v4()}}).then((function(e){return e.json()})).catch((function(e){console.error("Error: ",e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(e,t){return Xe.apply(this,arguments)}function Xe(){return(Xe=i._asyncToGenerator(i._regeneratorRuntime().mark((function e(n,a){return i._regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n,{method:"POST",headers:{"Content-Type":"application/json","X-Request-ID":t.v4()},body:JSON.stringify(a)}).then((function(e){return e.json()})).catch((function(e){console.error("Error: ",e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(){return(Ke=i._asyncToGenerator(i._regeneratorRuntime().mark((function e(t){var n,a,o,r;return i._regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=sessionStorage.getItem("dynamicClientData"))){e.next=5;break}if(!(0===(a=n.client_secret_expires_at||0)||Date.now()<1e3*a)){e.next=5;break}return e.abrupt("return",JSON.parse(n));case 5:return sessionStorage.removeItem("dynamicClientData"),e.next=8,He("".concat(t.authority,"/.well-known/openid-configuration"));case 8:return o=e.sent,e.next=11,Je(o.registration_endpoint,{redirect_uris:[s.buildUrl("/oidc-callback.html")],client_name:"ownCloud Web on ".concat(window.location.origin)});case 11:return r=e.sent,sessionStorage.setItem("dynamicClientData",JSON.stringify(r)),e.abrupt("return",r);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const Qe=({applicationName:e,applicationId:n,store:i,router:a,translations:o,supportedLanguages:r})=>{if(!e)throw new s.ApiError("applicationName can't be blank");if(!n)throw new s.ApiError("applicationId can't be blank");return{announceRoutes:e=>((e,n,i)=>{if(!t.isArray(i))throw new s.ApiError("routes can't be blank");const a=t=>t.startsWith(`${e}-`)?t:`${e}-${t}`;i.map((n=>{if(!t.isObject(n))throw new s.ApiError("route can't be blank",n);const i=t.clone(n);return i.name&&(i.name=e===i.name?i.name:a(i.name)),i.path=`/${encodeURI(e)}${i.path}`,i.children&&(i.children=i.children.map((e=>{if(!t.isObject(n))throw new s.ApiError("route children can't be blank",n,e);const i=t.clone(e);return e.name&&(i.name=a(e.name)),i}))),i})).forEach((e=>{n.addRoute(e)}))})(n,a,e),announceNavigationItems:e=>((e,n,i)=>{if(!t.isObject(i))throw new s.ApiError("navigationItems can't be blank");n.commit("SET_NAV_ITEMS_FROM_CONFIG",{extension:e,navItems:i})})(n,i,e),announceTranslations:e=>((e,n,i)=>{if(!t.isObject(n))throw new s.ApiError("translations can't be blank");Object.keys(e).forEach((e=>{n[e]&&i[e]&&Object.assign(n[e],i[e])}))})(r,o,e),announceQuickActions:e=>((e,n)=>{if(!t.isObject(n))throw new s.ApiError("quickActions can't be blank");e.commit("ADD_QUICK_ACTIONS",n)})(i,e),announceStore:n=>((e,n,i)=>{const a=t.get(i,"default",i);if(!t.isObject(a))throw new s.ApiError("store can't be blank");n.registerModule(e,a)})(e,i,n),announceExtension:e=>((e,t,n)=>{t.commit("REGISTER_EXTENSION",{app:e,extension:n})})(n,i,e),requestStore:()=>(e=>(t.isEqual("production","development")&&console.warn("requestStore // store api is deprecated, use with caution"),e))(i),requestRouter:()=>(e=>(t.isEqual("production","development")&&console.warn("requestRouter // router api is deprecated, use with caution"),e))(a),openPortal:(e,i,a,o,r)=>((e,n,i,a,o,r)=>{t.Wormhole_1.open({to:["app",i,a].filter(Boolean).join("."),from:["app",e,a,o].filter(Boolean).join("."),order:o,passengers:r.map(n.$createElement)})})(n,e,i,a,o,r)}};class Ye extends class{runtimeApi;constructor(e){this.runtimeApi=e}}{applicationScript;constructor(e,t){super(e),this.applicationScript=t}initialize(){const{routes:e,navItems:t,translations:n,quickActions:i,store:a}=this.applicationScript;return e&&this.runtimeApi.announceRoutes(e),t&&this.runtimeApi.announceNavigationItems(t),n&&this.runtimeApi.announceTranslations(n),i&&this.runtimeApi.announceQuickActions(i),a&&this.runtimeApi.announceStore(a),Promise.resolve(void 0)}ready(){const{ready:e}=this.applicationScript;return this.attachPublicApi(e),Promise.resolve(void 0)}mounted(e){const{mounted:t}=this.applicationScript;return this.attachPublicApi(t,e),Promise.resolve(void 0)}attachPublicApi(e,n){t.isFunction(e)&&e({...n&&{portal:{open:(...e)=>this.runtimeApi.openPortal.apply(n,[n,...e])}},instance:n,store:this.runtimeApi.requestStore(),router:this.runtimeApi.requestRouter(),announceExtension:this.runtimeApi.announceExtension})}}const Ze=new Map,{requirejs:et,define:tt}=window;tt("@vue/composition-api",(()=>t.vueCompositionAPI)),tt("vuex",(()=>t.vuex)),tt("luxon",(()=>t.luxon));const nt=async({applicationPath:e,store:n,router:i,translations:a,supportedLanguages:o})=>{if(Ze.has(e))throw new s.RuntimeError("application already announced",e);const r=await new Promise(((t,n)=>et([e],(e=>t(e)),(e=>n(e))))).catch((t=>{throw console.error(t),new s.RuntimeError("cannot load application",e)}));let l;try{if(!t.isObject(r.appInfo))throw new s.RuntimeError("next applications not implemented yet, stay tuned");l=await(async({applicationScript:e,store:n,router:i,translations:a,supportedLanguages:o})=>{const{appInfo:r}=e;if(!t.isObject(r))throw new s.RuntimeError("appInfo can't be blank");const{id:l,name:c}=r;if(!l)throw new s.RuntimeError("appInfo.id can't be blank");if(!c)throw new s.RuntimeError("appInfo.name can't be blank");const u=Qe({applicationName:c,applicationId:l,store:n,router:i,translations:a,supportedLanguages:o});return await n.dispatch("registerApp",e.appInfo),new Ye(u,e)})({applicationScript:r,store:n,router:i,translations:a,supportedLanguages:o}).catch()}catch(t){throw new s.RuntimeError("cannot create application",t.message,e)}return Ze.set(e,l),l};var it={default:{general:{name:"ownCloud",slogan:"ownCloud – A safe home for all your data"},logo:{topbar:"themes/owncloud/assets/logo.svg",favicon:"themes/owncloud/assets/favicon.jpg",login:"themes/owncloud/assets/logo.svg",notFound:"themes/owncloud/assets/cloud.svg"},loginPage:{autoRedirect:!0,backgroundImg:"themes/owncloud/assets/loginBackground.jpg"},designTokens:{colorPalette:{"background-accentuate":"rgba(255, 255, 5, 0.1)","background-default":"#ffffff","background-highlight":"#edf3fa","background-muted":"#f8f8f8","background-secondary":"#ffffff","background-hover":"rgb(236, 236, 236)",border:"#ecebee","input-bg":"#ffffff","input-border":"#ceddee","input-text-default":"#041e42","input-text-muted":"#4c5f79","swatch-brand-default":"#041e42","swatch-brand-hover":"#223959","swatch-danger-default":"#e00000","swatch-danger-hover":"#e96464","swatch-danger-muted":"#b50000","swatch-inverse-default":"#ffffff","swatch-inverse-hover":"#ffffff","swatch-inverse-muted":"#bfbfbf","swatch-passive-default":"#4c5f79","swatch-passive-hover":"#97a2b1","swatch-passive-muted":"#283e5d","swatch-primary-default":"#4a76ac","swatch-primary-hover":"#80a7d7","swatch-primary-muted":"#2c588e","swatch-primary-gradient":"#4e85c8","swatch-success-default":"#4f822f","swatch-success-hover":"#93e054","swatch-success-muted":"#53960a","swatch-warning-default":"#c6501b","swatch-warning-hover":"#fda94b","swatch-warning-muted":"#b35100","text-default":"#041e42","text-inverse":"#ffffff","text-muted":"#4c5f79","icon-folder":"#4d7eaf","icon-archive":"#fbbe54","icon-image":"#ee6b3b","icon-spreadsheet":"#15c286","icon-document":"#3b44a6","icon-video":"#045459","icon-audio":"#700460","icon-presentation":"#ee6b3b","icon-pdf":"#ec0d47"}}},"default-dark":{general:{name:"ownCloud",slogan:"ownCloud – A safe home for all your data"},logo:{topbar:"themes/owncloud/assets/logo.svg",favicon:"themes/owncloud/assets/favicon.jpg",login:"themes/owncloud/assets/logo.svg",notFound:"themes/owncloud/assets/cloud.svg"},loginPage:{autoRedirect:!0,backgroundImg:"themes/owncloud/assets/loginBackground.jpg"},designTokens:{breakpoints:{"xsmall-max":"","small-default":"","small-max":"","medium-default":"","medium-max":"","large-default":"","large-max":"",xlarge:""},colorPalette:{"background-accentuate":"#696969","background-default":"#292929","background-highlight":"#383838","background-muted":"#383838","background-secondary":"#4f4f4f","background-hover":"#383838",border:"#383838","input-bg":"#4f4f4f","input-border":"#4f4f4f","input-text-default":"#dadcdf","input-text-muted":"#bdbfc3","swatch-brand-default":"#212121","swatch-brand-hover":"#ffffff","swatch-danger-default":"#d11d1c","swatch-danger-hover":"","swatch-danger-muted":"","swatch-inverse-default":"","swatch-inverse-hover":"","swatch-inverse-muted":"#696969","swatch-passive-default":"#c2c2c2","swatch-passive-hover":"","swatch-passive-muted":"#bdbfc3","swatch-primary-default":"#73b0f2","swatch-primary-hover":"#7bafef","swatch-primary-muted":"","swatch-primary-gradient":"#4e85c8","swatch-success-default":"#04b253","swatch-success-hover":"","swatch-success-muted":"","swatch-warning-default":"","swatch-warning-hover":"","swatch-warning-muted":"","text-default":"#DADCDF","text-inverse":"#000000","text-muted":"#c2c2c2","icon-folder":"rgb(44, 101, 255)","icon-archive":"rgb(255, 207, 1)","icon-image":"rgb(255, 111, 0)","icon-spreadsheet":"rgb(0, 182, 87)","icon-document":"rgb(44, 101, 255)","icon-video":"rgb(0, 187, 219)","icon-audio":"rgb(208, 67, 236)","icon-presentation":"rgb(255, 64, 6)","icon-pdf":"rgb(225, 5, 14)"},fontSizes:{default:"",large:"",medium:""},sizes:{"form-check-default":"","height-small":"","height-table-row":"","icon-default":"","max-height-logo":"","max-width-logo":"","width-medium":""},spacing:{xsmall:"",small:"",medium:"",large:"",xlarge:"",xxlarge:""}}}},at=function(){var e=i._asyncToGenerator(i._regeneratorRuntime().mark((function e(){var n,a,o,r,s=arguments;return i._regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>0&&void 0!==s[0]?s[0]:"",a={theme:it},"json"===n.split(".").pop()){e.next=5;break}return t.isEqual("production","development")&&console.info("Theme '".concat(n,"' does not specify a json file, using default theme.")),e.abrupt("return",a);case 5:return e.prev=5,e.next=8,fetch(n,{headers:{"X-Request-ID":t.v4()}});case 8:if((o=e.sent).ok){e.next=11;break}return e.abrupt("return",a);case 11:return e.next=13,o.json();case 13:return r=e.sent,e.abrupt("return",{theme:r});case 17:return e.prev=17,e.t0=e.catch(5),console.error("Failed to load theme '".concat(n,"' is not a valid json file, using default theme.")),e.abrupt("return",a);case 21:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(){return e.apply(this,arguments)}}();class ot extends t.DropTarget{addFiles=e=>{if(this.opts.uppyService)return void this.opts.uppyService.publish("filesSelected",e);const t=e.map((e=>({source:this.id,name:e.name,type:e.type,data:e,meta:{relativePath:e.relativePath||null}})));try{this.uppy.addFiles(t)}catch(e){this.uppy.log(e)}}}class rt extends t.Tus{upload(e){return e.meta.tusEndpoint&&(this.opts.endpoint=e.meta.tusEndpoint),super.upload(e)}}class st{uppy;uploadInputs=[];constructor(){this.uppy=new t.Uppy({autoProceed:!0}),this.setUpEvents()}useTus({tusMaxChunkSize:e,tusHttpMethodOverride:t,tusExtension:n,onBeforeRequest:i}){const a={chunkSize:e||1/0,removeFingerprintOnSuccess:!0,overridePatchMethod:!!t,retryDelays:[0,500,1e3],uploadDataDuringCreation:n.includes("creation-with-upload"),onBeforeRequest:i,onShouldRetry:(e,t,n,i)=>!(e?.originalResponse?.getStatus()>=500)&&i(e)},o=this.uppy.getPlugin("XHRUpload");o&&this.uppy.removePlugin(o);const r=this.uppy.getPlugin("Tus");r?r.setOptions(a):this.uppy.use(rt,a)}useXhr({headers:e,xhrTimeout:n}){const i={endpoint:"",method:"put",headers:e,formData:!1,timeout:n,getResponseData:()=>({})},a=this.uppy.getPlugin("Tus");a&&this.uppy.removePlugin(a);const o=this.uppy.getPlugin("XHRUpload");o?o.setOptions(i):this.uppy.use(t.XHRUpload,i)}tusActive(){return!!this.uppy.getPlugin("Tus")}useDropTarget({targetSelector:e,uppyService:t}){this.uppy.getPlugin("DropTarget")||this.uppy.use(ot,{target:e,uppyService:t,onDragOver:e=>{this.publish("drag-over",e)},onDragLeave:e=>{this.publish("drag-out",e)},onDrop:e=>{this.publish("drop",e)}})}removeDropTarget(){const e=this.uppy.getPlugin("DropTarget");e&&this.uppy.removePlugin(e)}subscribe(e,t){return a.eventBus.subscribe(e,t)}unsubscribe(e,t){a.eventBus.unsubscribe(e,t)}publish(e,t){a.eventBus.publish(e,t)}setUpEvents(){this.uppy.on("progress",(e=>{this.publish("progress",e)})),this.uppy.on("upload-progress",((e,t)=>{this.publish("upload-progress",{file:e,progress:t})})),this.uppy.on("cancel-all",(()=>{this.publish("uploadCancelled")})),this.uppy.on("complete",(e=>{this.publish("uploadCompleted",e),e.successful.forEach((e=>{this.uppy.removeFile(e.id)})),this.clearInputs()})),this.uppy.on("upload-success",(e=>{this.publish("uploadSuccess",e)})),this.uppy.on("upload-error",((e,t)=>{this.publish("uploadError",{file:e,error:t})})),this.uppy.on("file-removed",(()=>{this.publish("uploadRemoved"),this.clearInputs()})),this.uppy.on("file-added",(e=>{const t=e;if(this.uppy.getPlugin("Tus")&&this.uppy.setFileMeta(t.id,{mtime:t.data.lastModified/1e3}),this.uppy.getPlugin("XHRUpload")){const e=encodeURIComponent(t.name);this.uppy.setFileState(t.id,{xhrUpload:{endpoint:r.urlJoin(t.meta.tusEndpoint,e)}})}}))}registerUploadInput(e){"true"!==e.getAttribute("listener")&&(e.setAttribute("listener","true"),e.addEventListener("change",(e=>{const t=e.target,n=Array.from(t.files);this.publish("filesSelected",n)})),this.uploadInputs.push(e))}removeUploadInput(e){this.uploadInputs=this.uploadInputs.filter((t=>t!==e))}uploadFiles(e){this.uppy.addFiles(e)}retryAllUploads(){return this.uppy.retryAll()}pauseAllUploads(){return this.uppy.pauseAll()}resumeAllUploads(){return this.uppy.resumeAll()}cancelAllUploads(){return this.uppy.cancelAll()}clearInputs(){this.uploadInputs.forEach((e=>{e.value=null}))}}const lt=({sdk:e})=>({async listFiles(t,{path:n,fileId:i}={},{depth:a=1,davProperties:o}={}){let s;if(m.isPublicSpaceResource(t)){if(s=await e.publicFiles.list(r.urlJoin(t.webDavPath.replace(/^\/public-files/,""),n),t.publicLinkPassword,o||r.DavProperties.PublicLink,`${a}`),1===s.length&&(s[0].name=r.urlJoin(t.id,n,{leadingSlashes:!0})),s.forEach((e=>{e.name=e.name.split("/").slice(2).join("/")})),!n){const[e,...t]=s;return{resource:m.buildPublicSpaceResource(e),children:t.map(m.buildResource)}}const i=s.map(m.buildResource);return{resource:i[0],children:i.slice(1)}}const l=async()=>{const n=await e.files.getPathForFileId(i);return this.listFiles(t,{path:n},{depth:a,davProperties:o})};try{s=await e.files.list(r.urlJoin(t.webDavPath,n),`${a}`,o||r.DavProperties.Default);const c=s.map(m.buildResource);return i&&i!==c[0].fileId?l():{resource:c[0],children:c.slice(1)}}catch(e){if(404===e.statusCode&&i)return l();throw e}}}),ct=e=>{const t=lt(e),{listFiles:n}=t,i=((e,t)=>({getFileInfo:async(t,n,i)=>(await e.listFiles(t,n,{depth:0,...i})).resource}))(t),{getFileInfo:a}=i,{createFolder:o}=((e,{sdk:t})=>({createFolder:async(n,{path:i})=>(m.isPublicSpaceResource(n)?await t.publicFiles.createFolder(r.urlJoin(n.webDavPath.replace(/^\/public-files/,""),i),null,n.publicLinkPassword):await t.files.createFolder(r.urlJoin(n.webDavPath,i),r.DavProperties.Default),e.getFileInfo(n,{path:i}))}))(i,e),s=(({sdk:e})=>({async getFileContents(t,{path:n},{responseType:i="text",noCache:a=!0}={}){if(m.isPublicSpaceResource(t)){const o=await e.publicFiles.download("",r.urlJoin(t.webDavPath.replace(/^\/public-files/,""),n),t.publicLinkPassword,{noCache:a});return o.statusCode=o.status,{response:o,body:await o[i](),headers:{ETag:o.headers.get("etag"),"OC-ETag":o.headers.get("oc-etag"),"OC-FileId":o.headers.get("oc-fileid")}}}return e.files.getFileContents(r.urlJoin(t.webDavPath,n),{resolveWithResponseObject:!0,noCache:!0,responseType:i})}}))(e),{getFileContents:l}=s,{putFileContents:c}=((e,{sdk:t})=>({putFileContents:async(n,{path:i,content:a="",...o})=>(m.isPublicSpaceResource(n)?await t.publicFiles.putFileContents("",r.urlJoin(n.webDavPath.replace(/^\/public-files/,""),i),n.publicLinkPassword,a,o):await t.files.putFileContents(r.urlJoin(n.webDavPath,i),a,o),e.getFileInfo(n,{path:i}))}))(i,e),{getFileUrl:u,revokeUrl:d}=((e,{sdk:t})=>({async getFileUrl(n,i,{disposition:a="attachment",signUrlTimeout:o=86400,isUrlSigningEnabled:r}){const s="inline"===a,{path:l}=i;let{downloadURL:c}=i,u=!0;if(!c&&!s){const e=`${n.webDavPath}/${l}`;c=t.files.getFileUrl(e),r?c=await t.signUrl(c,o):u=!1}if(!u||s){const t=await e.getFileContents(n,i,{responseType:"blob"});c=URL.createObjectURL(t.body)}return c},revokeUrl:e=>{e&&e.startsWith("blob:")&&URL.revokeObjectURL(e)}}))(s,e),{copyFiles:p}=(({sdk:e})=>({copyFiles:(t,{path:n},i,{path:a},o)=>m.isPublicSpaceResource(t)?e.publicFiles.copy(r.urlJoin(t.webDavPath.replace(/^\/public-files/,""),n),r.urlJoin(i.webDavPath.replace(/^\/public-files/,""),a),t.publicLinkPassword,o?.overwrite||!1):e.files.copy(r.urlJoin(t.webDavPath,n),r.urlJoin(i.webDavPath,a),o?.overwrite||!1)}))(e),{moveFiles:h}=(({sdk:e})=>({moveFiles:(t,{path:n},i,{path:a},o)=>m.isShareSpaceResource(t)&&"/"===n?e.files.move(`${t.webDavPath}/${n||""}`,`/spaces/${m.SHARE_JAIL_ID}!${m.SHARE_JAIL_ID}/${a||""}`,o?.overwrite||!1):m.isPublicSpaceResource(t)?e.publicFiles.move(r.urlJoin(t.webDavPath.replace(/^\/public-files/,""),n),r.urlJoin(i.webDavPath.replace(/^\/public-files/,""),a),t.publicLinkPassword,o?.overwrite||!1):e.files.move(`${t.webDavPath}/${n||""}`,`${i.webDavPath}/${a||""}`,o?.overwrite||!1)}))(e),{deleteFile:f}=(({sdk:e})=>({deleteFile:async(t,{path:n,...i})=>m.isPublicSpaceResource(t)?e.publicFiles.delete(r.urlJoin(t.webDavPath.replace(/^\/public-files/,""),n),null,t.publicLinkPassword):e.files.delete(r.urlJoin(t.webDavPath,n))}))(e),{restoreFile:g}=(({sdk:e})=>({restoreFile(t,{id:n},{path:i},{overwrite:a}){if(m.isPublicSpaceResource(t))return;const o=r.urlJoin(t.webDavPath,i);return e.fileTrash.restore(t.webDavTrashPath,n,o,a)}}))(e);return{copyFiles:p,createFolder:o,deleteFile:f,restoreFile:g,getFileContents:l,getFileInfo:a,getFileUrl:u,listFiles:n,moveFiles:h,putFileContents:c,revokeUrl:d}},ut=async e=>{const{openIdConnect:t={}}=e;if(!t.dynamic)return;const{client_id:n,client_secret:i}=await function(e){return Ke.apply(this,arguments)}(t);t.client_id=n,t.client_secret=i},dt=e=>{const t=[{name:"preview",oldName:"media-viewer"},{name:"text-editor",oldName:"markdown-editor"}];return{...e,apps:e.apps.map((e=>{const n=t.find((t=>t.oldName===e));return n?(console.warn(`app "${n.oldName}" has been renamed, use "${n.name}" instead.`),n.name):e}))}},pt=async({store:e,vue:n,designSystem:i,runtimeConfiguration:a})=>{const{theme:o}=await at(a?.theme);await e.dispatch("loadThemes",{theme:o});const r=c.useLocalStorage("oc_currentThemeName",null);null===t.unref(r)&&(r.value=U()),await e.dispatch("loadTheme",{theme:o[t.unref(r)]||o.default}),n.use(i,{tokens:e.getters.theme.designTokens})},mt=({vue:e,supportedLanguages:n,translations:i})=>{e.use(t.getTextPlugin,{availableLanguages:n,defaultLanguage:navigator.language.substring(0,2),translations:i,silent:!0})},ht=({store:e})=>{["ownCloud Web UI 6.0.0",le({store:e})].filter(Boolean).forEach((e=>{console.log(`%c ${e} `,"background-color: #041E42; color: #FFFFFF; font-weight: bold; border: 1px solid #FFFFFF; padding: 5px;")}))};e.bootstrap=async e=>{const n=await(async e=>{const n=await fetch(e,{headers:{"X-Request-ID":t.v4()}});if(200!==n.status)throw new Error(`config could not be loaded. HTTP status-code ${n.status}`);const i=await n.json().catch((e=>{throw new Error(`config could not be parsed. ${e}`)}));return a.configurationManager.initialize(i),i})(e);((e,n)=>{if(e.sentry?.dsn){const{dsn:i,environment:a="production",...o}=e.sentry;t.init({dsn:i,environment:a,integrations:[new t.Vue$1({Vue:n,attachProps:!0,logErrors:!0})],...o})}})(n,t.Vue),await(async({vue:e,runtimeConfiguration:n,store:i})=>{await i.dispatch("loadConfig",n),t.set(e,"$store",i)})({vue:t.Vue,store:je,runtimeConfiguration:n}),await(async({runtimeConfiguration:e,store:t,router:n,translations:i,supportedLanguages:a})=>{const{apps:o=[],external_apps:r=[]}=dt(e),s=[...o.map((e=>`web-app-${e}`)),...r.map((e=>e.path))].filter(Boolean),l=(await Promise.allSettled(s.map((e=>nt({applicationPath:e,store:t,supportedLanguages:a,router:n,translations:i}))))).reduce(((e,t)=>("fulfilled"!==t.status?console.error(t.reason):e.push(t.value),e)),[]);return await Promise.all(l.map((e=>e.initialize()))),l})({runtimeConfiguration:n,store:je,supportedLanguages:Ge,router:s.router,translations:qe}),(({vue:e,runtimeConfiguration:n})=>{const i=new t.OwnCloud;i.init({baseUrl:n.server||window.location.origin}),e.prototype.$client=i,e.prototype.$clientService=o.clientService,e.prototype.$clientService.owncloudSdk=i,e.prototype.$clientService.webdav=ct({sdk:i})})({vue:t.Vue,runtimeConfiguration:n}),(({vue:e})=>{e.prototype.$uppyService=new st})({vue:t.Vue}),(({vue:e,store:n})=>{const i=new u.PermissionManager(n);e.prototype.$permissionManager=i,t.set(e,"$permissionManager",i)})({vue:t.Vue,store:je}),await ut(n),await(({vue:e,configurationManager:n,store:i,router:a})=>{s.authService.initialize(n,o.clientService,i,a),e.prototype.$authService=s.authService,t.set(e,"$authService",s.authService)})({vue:t.Vue,configurationManager:a.configurationManager,store:je,router:s.router}),mt({vue:t.Vue,supportedLanguages:Ge,translations:qe}),await pt({store:je,vue:t.Vue,designSystem:t.designSystem,runtimeConfiguration:n}),(({store:e,router:n})=>{const i=e.getters.appIds;let a=e.getters.configuration.options.defaultExtension;(!a||i.indexOf(a)<0)&&(a=i[0]);const o=e.getters.getNavItemsByExtension(a)[0]?.route;o&&n.addRoute({path:"/",redirect:()=>o}),t.sync(e,n)})({store:je,router:s.router})},e.renderFailure=async e=>{ht({store:je}),await mt({vue:t.Vue,supportedLanguages:Ge,translations:qe}),await pt({store:je,vue:t.Vue,designSystem:t.designSystem}),console.error(e),new t.Vue({el:"#owncloud",store:je,render:e=>e(Ve.failure)})},e.renderSuccess=()=>{const e=Array.from(Ze.values()),n=new t.Vue({el:"#owncloud",store:je,router:s.router,render:e=>e(Ve.success)});n.$once("mounted",(()=>{e.forEach((e=>e.mounted(n)))})),je.watch(((e,t)=>t["runtime/auth/isUserContextReady"]||t["runtime/auth/isPublicLinkContextReady"]),(async(t,n)=>{t&&t!==n&&(ht({store:je}),await(async({applications:e})=>{await Promise.all(e.map((e=>e.ready())))})({applications:e}))}),{immediate:!0}),je.watch(((e,t)=>t["runtime/auth/isUserContextReady"]),(async e=>{if(!e)return;const t=n.$clientService;if(je.getters.capabilities?.spaces?.enabled){const e=t.graphAuthenticated(je.getters.configuration.server,je.getters["runtime/auth/accessToken"]);await je.dispatch("runtime/spaces/loadSpaces",{graphClient:e});const i=je.getters["runtime/spaces/spaces"].find((e=>m.isPersonalSpaceResource(e)));return void je.commit("runtime/spaces/UPDATE_SPACE_FIELD",{id:i.id,field:"name",value:n.$gettext("Personal")})}const i=je.getters.user,o=m.buildSpace({id:i.id,driveAlias:`personal/${i.id}`,driveType:"personal",name:n.$gettext("All files"),webDavPath:`/files/${i.id}`,webDavTrashPath:`/trash-bin/${i.id}`,serverUrl:a.configurationManager.serverUrl}),s=await t.webdav.getFileInfo(o,{path:""},{davProperties:[r.DavProperty.FileId]});o.fileId=s.fileId,je.commit("runtime/spaces/ADD_SPACES",[o]),je.commit("runtime/spaces/SET_SPACES_INITIALIZED",!0)}),{immediate:!0}),je.watch(((e,t)=>t["runtime/auth/isPublicLinkContextReady"]),(e=>{if(!e)return;const t=je.getters["runtime/auth/publicLinkToken"],i=je.getters["runtime/auth/publicLinkPassword"],o=m.buildPublicSpaceResource({id:t,name:n.$gettext("Public files"),...i&&{publicLinkPassword:i},serverUrl:a.configurationManager.serverUrl});je.commit("runtime/spaces/ADD_SPACES",[o]),je.commit("runtime/spaces/SET_SPACES_INITIALIZED",!0)}),{immediate:!0}),je.watch(((e,t)=>t["runtime/auth/publicLinkPassword"]),(e=>{const t=je.getters["runtime/auth/publicLinkToken"],n=je.getters["runtime/spaces/spaces"].find((e=>m.isPublicSpaceResource(e)&&e.id===t));n&&(n.publicLinkPassword=e)}))},Object.defineProperty(e,"__esModule",{value:!0})}));
