define(["./chunks/vendor-22992e2c","./chunks/useAppDefaults-a6c3be91","./chunks/visibility-c7f197c2","./chunks/base-fbc1ccef","./chunks/AppTopBar-4add792e","./chunks/useSpacesLoading-b404aeae","./chunks/functions-f74c7f04","./chunks/useGraphClient-6c0c047b","./chunks/useDriveResolver-be2aa3cc"],(function(e,n,t,i,r,o,a,s,c){"use strict";var d={cs:{},de:{"Loading PDF document":"Das PDF-Dokument wird geladen",msg:"Nachricht","PDF Viewer":"PDF Vorschau"},es:{"Loading PDF document":"Cargando documento PDF",msg:"msg","PDF Viewer":"Visor PDF"},fr:{"Loading PDF document":"Chargement du document PDF",msg:"msg","PDF Viewer":"Visionneuse PDF"},gl:{msg:"msx"},it:{"Loading PDF document":"Caricamento documento PDF","PDF Viewer":"Visualizzatore PDF"}};const l={name:"ErrorScreen"};var u=function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"oc-position-center oc-text-center"},[n("oc-icon",{attrs:{size:"xxlarge",name:"error-warning","fill-type":"line"}})],1)};u._withStripped=!0;const p=e.normalizeComponent({render:u,staticRenderFns:[]},undefined,l,undefined,false,undefined,!1,void 0,void 0,void 0);const f={name:"LoadingScreen"};var h=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"oc-position-center oc-text-center"},[t("oc-spinner",{attrs:{size:"xlarge"}}),e._v(" "),t("p",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-invisible"},[e._v("Loading PDF document")])],1)};h._withStripped=!0;const m=e.normalizeComponent({render:h,staticRenderFns:[]},undefined,f,undefined,false,undefined,!1,void 0,void 0,void 0);const v=e.defineComponent({name:"PDFViewer",components:{ErrorScreen:p,LoadingScreen:m,AppTopBar:r.__vue_component__},setup:()=>({...n.useAppDefaults({applicationId:"pdf-viewer"})}),data:()=>({loading:!0,loadingError:!1,url:"",resource:null}),watch:{currentFileContext:{handler:function(){this.unloadPdf(),this.loadPdf(this.currentFileContext)},immediate:!0}},beforeDestroy(){this.unloadPdf()},methods:{async loadPdf(e){try{this.loading=!0,this.resource=await this.getFileInfo(e),this.replaceInvalidFileRoute(this.currentFileContext,this.resource),this.url=await this.getUrlForResource(e.space,this.resource,{disposition:"inline"})}catch(e){this.loadingError=!0,console.error("Error fetching pdf",e)}finally{this.loading=!1}},unloadPdf(){this.revokeUrl(this.url)}}});var g=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("main",[t("app-top-bar",{attrs:{resource:e.resource},on:{close:e.closeApp}}),e._v(" "),e.loading?t("loading-screen"):e.loadingError?t("error-screen"):t("div",{staticClass:"oc-height-1-1"},[t("object",{staticClass:"pdf-viewer oc-width-1-1",attrs:{data:e.url,type:"application/pdf"}})])],1)};g._withStripped=!0;return{appInfo:{name:"PDF Viewer",id:"pdf-viewer",icon:"resource-type-pdf",iconFillType:"fill",extensions:[{extension:"pdf",routeName:"pdf-viewer",canBeDefault:!0}]},routes:[{path:"/:driveAliasAndItem*",component:e.normalizeComponent({render:g,staticRenderFns:[]},undefined,v,"data-v-bd3db758",false,undefined,!1,void 0,void 0,void 0),name:"pdf-viewer",meta:{authContext:"hybrid",title:"PDF Viewer",patchCleanPath:!0}}],translations:d}}));
